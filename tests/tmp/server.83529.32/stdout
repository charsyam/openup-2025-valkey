### Starting server for test 
88815:M 03 May 2025 23:04:22.774 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
88815:M 03 May 2025 23:04:22.774 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
88815:M 03 May 2025 23:04:22.774 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=88815, just started
88815:M 03 May 2025 23:04:22.774 * Configuration loaded
88815:M 03 May 2025 23:04:22.775 * Increased maximum number of open files to 10032 (it was originally set to 256).
88815:M 03 May 2025 23:04:22.775 * monotonic clock: POSIX clock_gettime
88815:M 03 May 2025 23:04:22.775 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 23126
 |###|   .+###############+.   |###|    PID: 88815                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

88815:M 03 May 2025 23:04:22.775 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
88815:M 03 May 2025 23:04:22.775 * No cluster configuration found, I'm eb27e8a31fc4f4931303e6e99823163f120ec625
88815:M 03 May 2025 23:04:22.778 * Server initialized
88815:M 03 May 2025 23:04:22.778 * Ready to accept connections tcp
88815:M 03 May 2025 23:04:22.778 * Ready to accept connections unix
88815:M 03 May 2025 23:04:22.905 - Accepted 127.0.0.1:60053
88815:M 03 May 2025 23:04:22.905 - Client closed connection id=2 addr=127.0.0.1:60053 laddr=127.0.0.1:23126 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
88815:M 03 May 2025 23:04:22.915 - Accepted 127.0.0.1:60054
88815:M 03 May 2025 23:04:23.074 # Missing implement of connection type tls
88815:M 03 May 2025 23:04:23.143 - Accepting cluster node connection from 127.0.0.1:60062
88815:M 03 May 2025 23:04:23.144 * IP address for this node updated to 127.0.0.1
88815:M 03 May 2025 23:04:23.246 - Accepting cluster node connection from 127.0.0.1:60076
88815:M 03 May 2025 23:04:23.284 - Accepting cluster node connection from 127.0.0.1:60081
88815:M 03 May 2025 23:04:23.292 - Accepting cluster node connection from 127.0.0.1:60083
88815:M 03 May 2025 23:04:23.296 * Successfully completed handshake with 5e7258148493b50d1d5c17f39eb38fd9bd2429eb ()
88815:M 03 May 2025 23:04:23.312 * Successfully completed handshake with 773fb3ff4264425e11fe75778f273824f43ac0ee ()
88815:M 03 May 2025 23:04:23.342 - Accepting cluster node connection from 127.0.0.1:60087
88815:M 03 May 2025 23:04:23.413 - Handshake: we already know node 773fb3ff4264425e11fe75778f273824f43ac0ee (), updating the address if needed.
88815:M 03 May 2025 23:04:23.459 * Node 5e7258148493b50d1d5c17f39eb38fd9bd2429eb () is no longer primary of shard 404af2c90d112dd12f28e2540f99637c8d4dea41; removed all 0 slot(s) it used to own
88815:M 03 May 2025 23:04:23.459 * Node 5e7258148493b50d1d5c17f39eb38fd9bd2429eb () is now part of shard 64ab741a08553038e001253c530648617c44faa9
88815:M 03 May 2025 23:04:23.459 * Node 5e7258148493b50d1d5c17f39eb38fd9bd2429eb () is now a replica of node 7153ae3b781af1d605528196125b59db48c35204 () in shard 64ab741a08553038e001253c530648617c44faa9
88815:M 03 May 2025 23:04:23.460 - Accepted 127.0.0.1:60103
88815:M 03 May 2025 23:04:23.461 * Replica 127.0.0.1:23123 asks for synchronization
88815:M 03 May 2025 23:04:23.461 * Full resync requested by replica 127.0.0.1:23123
88815:M 03 May 2025 23:04:23.461 * Replication backlog created, my new replication IDs are 'a8708cbf273c0aed7fa9a664625684f42c15379d' and '0000000000000000000000000000000000000000'
88815:M 03 May 2025 23:04:23.462 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
88815:M 03 May 2025 23:04:23.462 * Background RDB transfer started by pid 88922 to pipe through parent process
88815:M 03 May 2025 23:04:23.462 * Node 729ce5e54cb4b7b885054e62242a94ebc05fafec () is no longer primary of shard b1e41d1dc30bee2a8be5eb1499f9a5e9333ffed6; removed all 0 slot(s) it used to own
88815:M 03 May 2025 23:04:23.462 * Node 729ce5e54cb4b7b885054e62242a94ebc05fafec () is now part of shard 344f71891258bca2234d8df2e7351b823bae7e8e
88815:M 03 May 2025 23:04:23.462 * Node 729ce5e54cb4b7b885054e62242a94ebc05fafec () is now a replica of node 2d591a45518e281c917b205749fe5c4e702c9f77 () in shard 344f71891258bca2234d8df2e7351b823bae7e8e
88922:C 03 May 2025 23:04:23.463 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
88815:M 03 May 2025 23:04:23.465 # DEBUG LOG: ========== I am primary 1 ==========
88815:M 03 May 2025 23:04:23.465 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
88815:M 03 May 2025 23:04:23.487 * Background RDB transfer terminated with success
88815:M 03 May 2025 23:04:23.490 * Streamed RDB transfer with replica 127.0.0.1:23123 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
88815:M 03 May 2025 23:04:23.490 * Synchronization with replica 127.0.0.1:23123 succeeded
88815:M 03 May 2025 23:04:23.491 * Node 773fb3ff4264425e11fe75778f273824f43ac0ee () is no longer primary of shard 5d3b1754a88c94b35868328128019186537968d9; removed all 0 slot(s) it used to own
88815:M 03 May 2025 23:04:23.493 * Node 773fb3ff4264425e11fe75778f273824f43ac0ee () is now part of shard c61924e7bb3910934136b69ca96be7537f05028d
88815:M 03 May 2025 23:04:23.493 * Node 773fb3ff4264425e11fe75778f273824f43ac0ee () is now a replica of node eb27e8a31fc4f4931303e6e99823163f120ec625 () in shard c61924e7bb3910934136b69ca96be7537f05028d
88815:M 03 May 2025 23:04:23.496 - Accepting cluster node connection from 127.0.0.1:60109
88815:M 03 May 2025 23:04:24.795 * Cluster state changed: ok
### Starting test Cluster is up in tests/unit/cluster/pubsubshard-slot-migration.tcl
88815:M 03 May 2025 23:04:33.284 - Accepted 127.0.0.1:60722
### Starting test Migrate a slot, verify client receives sunsubscribe on primary serving the slot. in tests/unit/cluster/pubsubshard-slot-migration.tcl
88815:M 03 May 2025 23:04:33.301 - Accepted 127.0.0.1:60728
88815:M 03 May 2025 23:04:33.302 * Migrating slot 10059 to node 2d591a45518e281c917b205749fe5c4e702c9f77 ()
88815:M 03 May 2025 23:04:33.303 * Assigning slot 10059 to node 2d591a45518e281c917b205749fe5c4e702c9f77 () in shard 344f71891258bca2234d8df2e7351b823bae7e8e
88815:M 03 May 2025 23:04:33.304 - Client closed connection id=13 addr=127.0.0.1:60728 laddr=127.0.0.1:23126 fd=27 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33824 events=r cmd=ssubscribe user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=36 tot-net-out=126 tot-cmds=1
### Starting test Client subscribes to multiple channels, migrate a slot, verify client receives sunsubscribe on primary serving the slot. in tests/unit/cluster/pubsubshard-slot-migration.tcl
88815:M 03 May 2025 23:04:33.306 * Importing slot 1672 from node 7153ae3b781af1d605528196125b59db48c35204 ()
88815:M 03 May 2025 23:04:33.307 * Assigning slot 1672 to node eb27e8a31fc4f4931303e6e99823163f120ec625 () in shard c61924e7bb3910934136b69ca96be7537f05028d
88815:M 03 May 2025 23:04:33.307 * New configEpoch set to 6
88815:M 03 May 2025 23:04:33.310 * ConfigEpoch updated after importing slot 1672
### Starting test Migrate a slot, verify client receives sunsubscribe on replica serving the slot. in tests/unit/cluster/pubsubshard-slot-migration.tcl
88815:M 03 May 2025 23:04:33.316 - Accepted 127.0.0.1:60737
88815:M 03 May 2025 23:04:33.394 * Migrating slot 8379 to node 2d591a45518e281c917b205749fe5c4e702c9f77 ()
88815:M 03 May 2025 23:04:33.411 * Assigning slot 8379 to node 2d591a45518e281c917b205749fe5c4e702c9f77 () in shard 344f71891258bca2234d8df2e7351b823bae7e8e
### Starting test Move a replica to another primary, verify client receives sunsubscribe on replica serving the slot. in tests/unit/cluster/pubsubshard-slot-migration.tcl
88815:M 03 May 2025 23:04:33.413 - Accepted 127.0.0.1:60765
88815:M 03 May 2025 23:04:33.444 - Accepted 127.0.0.1:60777
88815:M 03 May 2025 23:04:33.454 * Node 5e7258148493b50d1d5c17f39eb38fd9bd2429eb () is now a replica of node eb27e8a31fc4f4931303e6e99823163f120ec625 () in shard c61924e7bb3910934136b69ca96be7537f05028d
### Starting test Delete a slot, verify sunsubscribe message in tests/unit/cluster/pubsubshard-slot-migration.tcl
88815:M 03 May 2025 23:04:33.457 - Accepted 127.0.0.1:60778
88815:M 03 May 2025 23:04:33.457 * Replica 127.0.0.1:23124 asks for synchronization
88815:M 03 May 2025 23:04:33.457 * Full resync requested by replica 127.0.0.1:23124
88815:M 03 May 2025 23:04:33.457 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
88815:M 03 May 2025 23:04:33.458 * Background RDB transfer started by pid 90356 to pipe through parent process
88815:M 03 May 2025 23:04:33.458 # Cluster state changed: fail
88815:M 03 May 2025 23:04:33.458 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
90356:C 03 May 2025 23:04:33.458 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
88815:M 03 May 2025 23:04:33.458 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
88815:M 03 May 2025 23:04:33.459 - Client closed connection id=17 addr=127.0.0.1:60778 laddr=127.0.0.1:23126 fd=30 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33824 events=r cmd=ssubscribe user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=30 tot-net-out=70 tot-cmds=1
### Starting test Reset cluster, verify sunsubscribe message in tests/unit/cluster/pubsubshard-slot-migration.tcl
88815:M 03 May 2025 23:04:33.461 * Background RDB transfer terminated with success
88815:M 03 May 2025 23:04:33.461 * Streamed RDB transfer with replica 127.0.0.1:23124 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
88815:M 03 May 2025 23:04:33.461 * Synchronization with replica 127.0.0.1:23124 succeeded
88815:M 03 May 2025 23:04:33.465 - Client closed connection id=12 addr=127.0.0.1:60722 laddr=127.0.0.1:23126 fd=26 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=5 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|delslots user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=730 tot-net-out=43 tot-cmds=15
### Starting test Check for memory leaks (pid 88851) in tests/unit/cluster/pubsubshard-slot-migration.tcl
88815:M 03 May 2025 23:04:33.480 * FAIL message received from 729ce5e54cb4b7b885054e62242a94ebc05fafec () about 2d591a45518e281c917b205749fe5c4e702c9f77 ()
88815:M 03 May 2025 23:04:33.489 * PONG contains mismatching sender ID. About node 2d591a45518e281c917b205749fe5c4e702c9f77 () in shard 344f71891258bca2234d8df2e7351b823bae7e8e added 10167 ms ago, having flags 7433
88815:M 03 May 2025 23:04:33.527 * Node 7153ae3b781af1d605528196125b59db48c35204 () reported node 2d591a45518e281c917b205749fe5c4e702c9f77 () as not reachable.
88815:M 03 May 2025 23:04:34.463 * Failover auth granted to 729ce5e54cb4b7b885054e62242a94ebc05fafec () for epoch 8
88815:M 03 May 2025 23:04:34.664 - Connection with Node 7153ae3b781af1d605528196125b59db48c35204 at 127.0.0.1:33127 failed: Connection refused
88815:M 03 May 2025 23:04:34.689 - Client closed connection id=3 addr=127.0.0.1:60054 laddr=127.0.0.1:23126 fd=14 name= age=12 idle=1 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=560 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|info user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=692 tot-net-out=12437 tot-cmds=22
88815:M 03 May 2025 23:04:34.765 - Connection with Node 7153ae3b781af1d605528196125b59db48c35204 at 127.0.0.1:33127 failed: Connection refused
88815:M 03 May 2025 23:04:34.866 - Connection with Node 7153ae3b781af1d605528196125b59db48c35204 at 127.0.0.1:33127 failed: Connection refused
88815:M 03 May 2025 23:04:34.967 - Connection with Node 7153ae3b781af1d605528196125b59db48c35204 at 127.0.0.1:33127 failed: Connection refused
88815:M 03 May 2025 23:04:35.783 - Connection with Node 7153ae3b781af1d605528196125b59db48c35204 at 127.0.0.1:33127 failed: Connection refused
88815:signal-handler (1746281075) Received SIGTERM scheduling shutdown...
88815:M 03 May 2025 23:04:35.883 * User requested shutdown...
88815:M 03 May 2025 23:04:35.884 * 2 of 2 replicas are in sync when shutting down.
88815:M 03 May 2025 23:04:35.884 * Removing the pid file.
88815:M 03 May 2025 23:04:35.884 * Saving the cluster configuration file before exiting.
88815:M 03 May 2025 23:04:35.888 * Removing the unix socket file.
88815:M 03 May 2025 23:04:35.889 # Valkey is now ready to exit, bye bye...
