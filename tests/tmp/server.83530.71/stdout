### Starting server for test 
97672:M 03 May 2025 23:05:32.799 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
97672:M 03 May 2025 23:05:32.801 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
97672:M 03 May 2025 23:05:32.802 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=97672, just started
97672:M 03 May 2025 23:05:32.802 * Configuration loaded
97672:M 03 May 2025 23:05:32.810 * Increased maximum number of open files to 10032 (it was originally set to 256).
97672:M 03 May 2025 23:05:32.812 * monotonic clock: POSIX clock_gettime
97672:M 03 May 2025 23:05:32.813 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 23646
 |###|   .+###############+.   |###|    PID: 97672                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

97672:M 03 May 2025 23:05:32.824 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
97672:M 03 May 2025 23:05:32.832 * No cluster configuration found, I'm 25e47028901afc1b98565f7d3a8f285acc4825ec
97672:M 03 May 2025 23:05:32.854 * Server initialized
97672:M 03 May 2025 23:05:32.854 * Ready to accept connections tcp
97672:M 03 May 2025 23:05:32.854 * Ready to accept connections unix
97672:M 03 May 2025 23:05:32.943 - Accepted 127.0.0.1:56535
97672:M 03 May 2025 23:05:32.944 - Client closed connection id=2 addr=127.0.0.1:56535 laddr=127.0.0.1:23646 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
97672:M 03 May 2025 23:05:32.957 - Accepted 127.0.0.1:56536
97672:M 03 May 2025 23:05:32.958 * Cluster meet 127.0.0.1:23645 (user request from 'id=3 addr=127.0.0.1:56536 laddr=127.0.0.1:23646 fd=14 name= user=default lib-name= lib-ver=').
97672:M 03 May 2025 23:05:32.961 * Cluster meet 127.0.0.1:23644 (user request from 'id=3 addr=127.0.0.1:56536 laddr=127.0.0.1:23646 fd=14 name= user=default lib-name= lib-ver=').
97672:M 03 May 2025 23:05:32.966 * Cluster meet 127.0.0.1:23643 (user request from 'id=3 addr=127.0.0.1:56536 laddr=127.0.0.1:23646 fd=14 name= user=default lib-name= lib-ver=').
97672:M 03 May 2025 23:05:32.969 * Cluster meet 127.0.0.1:23642 (user request from 'id=3 addr=127.0.0.1:56536 laddr=127.0.0.1:23646 fd=14 name= user=default lib-name= lib-ver=').
97672:M 03 May 2025 23:05:32.975 * Cluster meet 127.0.0.1:23641 (user request from 'id=3 addr=127.0.0.1:56536 laddr=127.0.0.1:23646 fd=14 name= user=default lib-name= lib-ver=').
97672:M 03 May 2025 23:05:32.996 # Missing implement of connection type tls
97672:M 03 May 2025 23:05:33.080 - Accepting cluster node connection from 127.0.0.1:56542
97672:M 03 May 2025 23:05:33.082 * IP address for this node updated to 127.0.0.1
97672:M 03 May 2025 23:05:33.084 * Successfully completed handshake with 3a46d596d455d018bea8fe52c1d42bef982fb9eb ()
97672:M 03 May 2025 23:05:33.084 * configEpoch collision with node 3a46d596d455d018bea8fe52c1d42bef982fb9eb (). configEpoch set to 1
97672:M 03 May 2025 23:05:33.108 - Accepting cluster node connection from 127.0.0.1:56543
97672:M 03 May 2025 23:05:33.108 - Accepting cluster node connection from 127.0.0.1:56544
97672:M 03 May 2025 23:05:33.108 - Accepting cluster node connection from 127.0.0.1:56545
97672:M 03 May 2025 23:05:33.108 * Successfully completed handshake with f09602eab915d134ec3fa21f82d6b91a2a0af831 ()
97672:M 03 May 2025 23:05:33.108 * Successfully completed handshake with a795b8f0589ac8c7b5c472c486308cddcef559e2 ()
97672:M 03 May 2025 23:05:33.108 * Successfully completed handshake with ed6aff43eddaa909e23d1006a8cc698b4c2cfe12 ()
97672:M 03 May 2025 23:05:33.117 - Accepting cluster node connection from 127.0.0.1:56546
97672:M 03 May 2025 23:05:33.118 * Successfully completed handshake with bebae9aa492eeccd2ccc10ca8cb192bb03d863a8 ()
97672:M 03 May 2025 23:05:33.464 - Accepted 127.0.0.1:56573
97672:M 03 May 2025 23:05:33.465 * Node a795b8f0589ac8c7b5c472c486308cddcef559e2 () is no longer primary of shard b8addc507605f82e413113ad5ac17cd988599dbb; removed all 0 slot(s) it used to own
97672:M 03 May 2025 23:05:33.465 * Node a795b8f0589ac8c7b5c472c486308cddcef559e2 () is now part of shard bfad5b862255f833dbea7e6cbd29f333394f2e85
97672:M 03 May 2025 23:05:33.465 * Node a795b8f0589ac8c7b5c472c486308cddcef559e2 () is now a replica of node 25e47028901afc1b98565f7d3a8f285acc4825ec () in shard bfad5b862255f833dbea7e6cbd29f333394f2e85
97672:M 03 May 2025 23:05:33.465 * Replica 127.0.0.1:23643 asks for synchronization
97672:M 03 May 2025 23:05:33.465 * Full resync requested by replica 127.0.0.1:23643
97672:M 03 May 2025 23:05:33.465 * Replication backlog created, my new replication IDs are 'b69b009e79cfac3101754b1db14b6997ae3a110f' and '0000000000000000000000000000000000000000'
97672:M 03 May 2025 23:05:33.465 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
97672:M 03 May 2025 23:05:33.466 * Background RDB transfer started by pid 97688 to pipe through parent process
97672:M 03 May 2025 23:05:33.466 * Node f09602eab915d134ec3fa21f82d6b91a2a0af831 () is no longer primary of shard 1527c0999fcdfd6371d2da9642bf2fec41b5b54e; removed all 0 slot(s) it used to own
97672:M 03 May 2025 23:05:33.466 * Node f09602eab915d134ec3fa21f82d6b91a2a0af831 () is now part of shard 19a99c7ea6d919e3e6462f6d76e99c382661c7e3
97672:M 03 May 2025 23:05:33.466 * Node f09602eab915d134ec3fa21f82d6b91a2a0af831 () is now a replica of node bebae9aa492eeccd2ccc10ca8cb192bb03d863a8 () in shard 19a99c7ea6d919e3e6462f6d76e99c382661c7e3
97688:C 03 May 2025 23:05:33.466 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
97672:M 03 May 2025 23:05:33.467 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
97672:M 03 May 2025 23:05:33.467 * Node 3a46d596d455d018bea8fe52c1d42bef982fb9eb () is no longer primary of shard 83954a76e2c9bbbbe788a93cc217f7492d835402; removed all 0 slot(s) it used to own
97672:M 03 May 2025 23:05:33.467 * Node 3a46d596d455d018bea8fe52c1d42bef982fb9eb () is now part of shard d1ef25a6da5c60f4770029e2a0899cda94efc970
97672:M 03 May 2025 23:05:33.467 * Node 3a46d596d455d018bea8fe52c1d42bef982fb9eb () is now a replica of node ed6aff43eddaa909e23d1006a8cc698b4c2cfe12 () in shard d1ef25a6da5c60f4770029e2a0899cda94efc970
97672:M 03 May 2025 23:05:33.468 # DEBUG LOG: ========== I am primary 0 ==========
97672:M 03 May 2025 23:05:33.471 * Background RDB transfer terminated with success
97672:M 03 May 2025 23:05:33.471 * Streamed RDB transfer with replica 127.0.0.1:23643 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
97672:M 03 May 2025 23:05:33.471 * Synchronization with replica 127.0.0.1:23643 succeeded
97672:M 03 May 2025 23:05:34.891 * Cluster state changed: ok
### Starting test Cluster should start ok in tests/unit/cluster/cluster-shards.tcl
### Starting test Cluster shards response is ok for shard 0 in tests/unit/cluster/cluster-shards.tcl
### Starting test Kill a node and tell the replica to immediately takeover in tests/unit/cluster/cluster-shards.tcl
### Starting test Verify health as fail for killed node in tests/unit/cluster/cluster-shards.tcl
### Starting test CLUSTER SHARDS slot response is non-empty when primary node fails in tests/unit/cluster/cluster-shards.tcl
97672:signal-handler (1746281147) Received SIGTERM scheduling shutdown...
97672:M 03 May 2025 23:05:47.625 * Failover auth granted to a795b8f0589ac8c7b5c472c486308cddcef559e2 () for epoch 6
97672:M 03 May 2025 23:05:47.625 * Configuration change detected. Reconfiguring myself as a replica of node a795b8f0589ac8c7b5c472c486308cddcef559e2 () in shard bfad5b862255f833dbea7e6cbd29f333394f2e85
97672:S 03 May 2025 23:05:47.625 * Before turning into a replica, using my own primary parameters to synthesize a cached primary: I may be able to synchronize with the new primary with just a partial transfer.
97672:S 03 May 2025 23:05:47.625 * Connecting to PRIMARY 127.0.0.1:23643
97672:S 03 May 2025 23:05:47.625 * PRIMARY <-> REPLICA sync started
97672:S 03 May 2025 23:05:47.625 * User requested shutdown...
97672:S 03 May 2025 23:05:47.625 * Waiting for replicas before shutting down.
97672:S 03 May 2025 23:05:47.630 - Client closed connection id=9 addr=127.0.0.1:56573 laddr=127.0.0.1:23646 fd=25 name= age=14 idle=5 flags=S capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=1 omem=16920 tot-mem=35352 events=r cmd=replconf user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=633 tot-net-out=41 tot-cmds=16
97672:S 03 May 2025 23:05:47.630 * Connection with replica 127.0.0.1:23643 lost.
97672:S 03 May 2025 23:05:47.630 - Accepting cluster node connection from 127.0.0.1:57525
97672:S 03 May 2025 23:05:47.630 - Accepting cluster node connection from 127.0.0.1:57546
97672:S 03 May 2025 23:05:47.630 - Accepting cluster node connection from 127.0.0.1:57557
97672:S 03 May 2025 23:05:47.630 - Accepting cluster node connection from 127.0.0.1:57570
97672:S 03 May 2025 23:05:47.630 - Accepting cluster node connection from 127.0.0.1:57581
97672:S 03 May 2025 23:05:47.630 - Client closed connection id=3 addr=127.0.0.1:56536 laddr=127.0.0.1:23646 fd=14 name= age=15 idle=4 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=47 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|myid user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=5998 tot-net-out=255302 tot-cmds=201
97672:S 03 May 2025 23:05:47.630 * Non blocking connect for SYNC fired the event.
97672:S 03 May 2025 23:05:47.631 * Primary replied to PING, replication can continue...
97672:S 03 May 2025 23:05:47.631 * Trying a partial resynchronization (request b69b009e79cfac3101754b1db14b6997ae3a110f:15).
97672:S 03 May 2025 23:05:47.631 * Successful partial resynchronization with primary.
97672:S 03 May 2025 23:05:47.632 * Primary replication ID changed to a89ff91d6db78914d2bab47b3857585c4e768c8a
97672:S 03 May 2025 23:05:47.632 * PRIMARY <-> REPLICA sync: Primary accepted a Partial Resynchronization.
97672:S 03 May 2025 23:05:47.726 * Removing the pid file.
97672:S 03 May 2025 23:05:47.729 * Saving the cluster configuration file before exiting.
97672:S 03 May 2025 23:05:47.745 * Removing the unix socket file.
97672:S 03 May 2025 23:05:47.745 # Valkey is now ready to exit, bye bye...
