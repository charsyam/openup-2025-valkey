### Starting server for test 
97181:M 03 May 2025 23:05:28.858 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
97181:M 03 May 2025 23:05:28.858 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
97181:M 03 May 2025 23:05:28.858 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=97181, just started
97181:M 03 May 2025 23:05:28.858 * Configuration loaded
97181:M 03 May 2025 23:05:28.858 * Increased maximum number of open files to 10032 (it was originally set to 256).
97181:M 03 May 2025 23:05:28.864 * monotonic clock: POSIX clock_gettime
97181:M 03 May 2025 23:05:28.867 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 25650
 |###|   .+###############+.   |###|    PID: 97181                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

97181:M 03 May 2025 23:05:28.881 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
97181:M 03 May 2025 23:05:28.890 * No cluster configuration found, I'm 9eb390e8ded52cf641b33887797c00ff53872c26
97181:M 03 May 2025 23:05:28.911 * Server initialized
97181:M 03 May 2025 23:05:28.911 * Ready to accept connections tcp
97181:M 03 May 2025 23:05:28.911 * Ready to accept connections unix
97181:M 03 May 2025 23:05:29.091 - Accepted 127.0.0.1:56103
97181:M 03 May 2025 23:05:29.092 - Client closed connection id=2 addr=127.0.0.1:56103 laddr=127.0.0.1:25650 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
97181:M 03 May 2025 23:05:29.115 - Accepted 127.0.0.1:56104
97181:M 03 May 2025 23:05:29.746 - Accepting cluster node connection from 127.0.0.1:56235
97181:M 03 May 2025 23:05:29.750 * IP address for this node updated to 127.0.0.1
97181:M 03 May 2025 23:05:29.871 - Accepting cluster node connection from 127.0.0.1:56265
97181:M 03 May 2025 23:05:29.873 - Accepting cluster node connection from 127.0.0.1:56269
97181:M 03 May 2025 23:05:29.938 - Accepting cluster node connection from 127.0.0.1:56273
97181:M 03 May 2025 23:05:29.980 * Successfully completed handshake with 6d062984222c6b8fea11f573fcb0ebcb21d117bb ()
97181:M 03 May 2025 23:05:30.001 # Missing implement of connection type tls
97181:M 03 May 2025 23:05:30.008 - Accepting cluster node connection from 127.0.0.1:56289
97181:M 03 May 2025 23:05:30.156 * Node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () is no longer primary of shard f8b9264d350e1b6f28b56bab3263dddab7527a17; removed all 0 slot(s) it used to own
97181:M 03 May 2025 23:05:30.156 * Node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () is now part of shard 30fd42788a34ad1993a9d803fc85dc59ab50a555
97181:M 03 May 2025 23:05:30.156 * Node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () is now a replica of node 13aa946ae073b283903d0b625ce1c86adb50c18e () in shard 30fd42788a34ad1993a9d803fc85dc59ab50a555
97181:M 03 May 2025 23:05:30.160 * Node 7784938381600c37ae962ee96f2a2eac0a305a61 () is no longer primary of shard ec45c5094d9c5aa67b32f0a89ad6ef1885439f7f; removed all 0 slot(s) it used to own
97181:M 03 May 2025 23:05:30.160 * Node 7784938381600c37ae962ee96f2a2eac0a305a61 () is now part of shard 17aa912c73fdfd2f9d07ca60ab9e8177abdb5853
97181:M 03 May 2025 23:05:30.160 * Node 7784938381600c37ae962ee96f2a2eac0a305a61 () is now a replica of node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () in shard 17aa912c73fdfd2f9d07ca60ab9e8177abdb5853
97181:M 03 May 2025 23:05:30.166 - Accepted 127.0.0.1:56308
97181:M 03 May 2025 23:05:30.169 * Node 3db47b5fc2b7f4cbe1582927946a84d5c923646e () is no longer primary of shard 18d4d063be1d57c64b124b0528cd553b3fed1068; removed all 0 slot(s) it used to own
97181:M 03 May 2025 23:05:30.171 * Node 3db47b5fc2b7f4cbe1582927946a84d5c923646e () is now part of shard 0618c300f6ba0c0f36756b1aa5de671e6ee48e93
97181:M 03 May 2025 23:05:30.177 * Node 3db47b5fc2b7f4cbe1582927946a84d5c923646e () is now a replica of node 9eb390e8ded52cf641b33887797c00ff53872c26 () in shard 0618c300f6ba0c0f36756b1aa5de671e6ee48e93
97181:M 03 May 2025 23:05:30.211 * Replica 127.0.0.1:25647 asks for synchronization
97181:M 03 May 2025 23:05:30.211 * Full resync requested by replica 127.0.0.1:25647
97181:M 03 May 2025 23:05:30.211 * Replication backlog created, my new replication IDs are 'dc4b0f9b148753fafe01cf4963503bc820eb1820' and '0000000000000000000000000000000000000000'
97181:M 03 May 2025 23:05:30.211 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
97181:M 03 May 2025 23:05:30.213 * Background RDB transfer started by pid 97277 to pipe through parent process
97181:M 03 May 2025 23:05:30.213 # DEBUG LOG: ========== I am primary 2 ==========
97277:C 03 May 2025 23:05:30.213 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
97181:M 03 May 2025 23:05:30.213 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
97181:M 03 May 2025 23:05:30.216 * Background RDB transfer terminated with success
97181:M 03 May 2025 23:05:30.216 * Streamed RDB transfer with replica 127.0.0.1:25647 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
97181:M 03 May 2025 23:05:30.216 * Synchronization with replica 127.0.0.1:25647 succeeded
97181:M 03 May 2025 23:05:30.945 * Cluster state changed: ok
### Starting test Slot migration states are replicated in tests/unit/cluster/slot-migration.tcl
### Starting test Migration target is auto-updated after failover in target shard in tests/unit/cluster/slot-migration.tcl
97181:M 03 May 2025 23:05:41.063 * FAIL message received from 13aa946ae073b283903d0b625ce1c86adb50c18e () about 6d062984222c6b8fea11f573fcb0ebcb21d117bb ()
97181:M 03 May 2025 23:05:41.063 * Node 13aa946ae073b283903d0b625ce1c86adb50c18e () reported node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () as not reachable.
97181:M 03 May 2025 23:05:41.063 # Cluster state changed: fail
97181:M 03 May 2025 23:05:41.063 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
97181:M 03 May 2025 23:05:42.006 * Failover auth granted to 7784938381600c37ae962ee96f2a2eac0a305a61 () for epoch 6
97181:M 03 May 2025 23:05:42.073 * Cluster state changed: ok
97181:M 03 May 2025 23:05:42.086 * Node 7784938381600c37ae962ee96f2a2eac0a305a61 () reported node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () as not reachable.
97181:M 03 May 2025 23:05:42.869 - Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb has old slots configuration, sending an UPDATE message about 7784938381600c37ae962ee96f2a2eac0a305a61
97181:M 03 May 2025 23:05:42.890 * Clear FAIL state for node 6d062984222c6b8fea11f573fcb0ebcb21d117bb (): primary without slots is reachable again.
97181:M 03 May 2025 23:05:42.892 * A failover occurred in shard 17aa912c73fdfd2f9d07ca60ab9e8177abdb5853; node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () failed over to node 7784938381600c37ae962ee96f2a2eac0a305a61 () with a config epoch of 6
97181:M 03 May 2025 23:05:42.894 * Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () is now a replica of node 7784938381600c37ae962ee96f2a2eac0a305a61 () in shard 17aa912c73fdfd2f9d07ca60ab9e8177abdb5853
97181:M 03 May 2025 23:05:42.955 * Node 7784938381600c37ae962ee96f2a2eac0a305a61 () reported node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () is back online.
97181:M 03 May 2025 23:05:42.974 * Node 13aa946ae073b283903d0b625ce1c86adb50c18e () reported node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () is back online.
97181:M 03 May 2025 23:05:43.014 * Failover auth granted to 6d062984222c6b8fea11f573fcb0ebcb21d117bb () for epoch 7
97181:M 03 May 2025 23:05:43.073 * A failover occurred in shard 17aa912c73fdfd2f9d07ca60ab9e8177abdb5853; node 7784938381600c37ae962ee96f2a2eac0a305a61 () failed over to node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () with a config epoch of 7
97181:M 03 May 2025 23:05:43.073 * Node 7784938381600c37ae962ee96f2a2eac0a305a61 () is now a replica of node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () in shard 17aa912c73fdfd2f9d07ca60ab9e8177abdb5853
### Starting test Migration source is auto-updated after failover in source shard in tests/unit/cluster/slot-migration.tcl
97181:M 03 May 2025 23:05:44.385 * Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () reported node 13aa946ae073b283903d0b625ce1c86adb50c18e () as not reachable.
97181:M 03 May 2025 23:05:44.392 * Marking node 13aa946ae073b283903d0b625ce1c86adb50c18e () as failing (quorum reached).
97181:M 03 May 2025 23:05:44.396 # Cluster state changed: fail
97181:M 03 May 2025 23:05:44.397 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
97181:M 03 May 2025 23:05:45.511 * Failover auth granted to 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () for epoch 8
97181:M 03 May 2025 23:05:45.530 * Node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () reported node 13aa946ae073b283903d0b625ce1c86adb50c18e () as not reachable.
97181:M 03 May 2025 23:05:45.530 * Cluster state changed: ok
97181:M 03 May 2025 23:05:46.184 - Node 13aa946ae073b283903d0b625ce1c86adb50c18e has old slots configuration, sending an UPDATE message about 940f25bab80d655fae5d2c00f7e5d053f18a0aa3
97181:M 03 May 2025 23:05:46.195 * A failover occurred in shard 30fd42788a34ad1993a9d803fc85dc59ab50a555; node 13aa946ae073b283903d0b625ce1c86adb50c18e () failed over to node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () with a config epoch of 8
97181:M 03 May 2025 23:05:46.195 * Node 13aa946ae073b283903d0b625ce1c86adb50c18e () is now a replica of node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () in shard 30fd42788a34ad1993a9d803fc85dc59ab50a555
97181:M 03 May 2025 23:05:46.195 * Clear FAIL state for node 13aa946ae073b283903d0b625ce1c86adb50c18e (): replica is reachable again.
97181:M 03 May 2025 23:05:46.202 * Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () reported node 13aa946ae073b283903d0b625ce1c86adb50c18e () is back online.
97181:M 03 May 2025 23:05:46.314 * Failover auth granted to 13aa946ae073b283903d0b625ce1c86adb50c18e () for epoch 9
97181:M 03 May 2025 23:05:46.406 * A failover occurred in shard 30fd42788a34ad1993a9d803fc85dc59ab50a555; node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () failed over to node 13aa946ae073b283903d0b625ce1c86adb50c18e () with a config epoch of 9
97181:M 03 May 2025 23:05:46.406 * Node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () is now a replica of node 13aa946ae073b283903d0b625ce1c86adb50c18e () in shard 30fd42788a34ad1993a9d803fc85dc59ab50a555
### Starting test Replica redirects key access in migrating slots in tests/unit/cluster/slot-migration.tcl
### Starting test Replica of migrating node returns ASK redirect after READONLY in tests/unit/cluster/slot-migration.tcl
### Starting test Replica of migrating node returns TRYAGAIN after READONLY in tests/unit/cluster/slot-migration.tcl
### Starting test Replica of importing node returns TRYAGAIN after READONLY and ASKING in tests/unit/cluster/slot-migration.tcl
### Starting test New replica inherits migrating slot in tests/unit/cluster/slot-migration.tcl
97181:M 03 May 2025 23:05:46.612 - Accepting cluster node connection from 127.0.0.1:58090
97181:M 03 May 2025 23:05:46.783 * A failover occurred in shard 30fd42788a34ad1993a9d803fc85dc59ab50a555; node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () failed over to node 13aa946ae073b283903d0b625ce1c86adb50c18e () with a config epoch of 9
97181:M 03 May 2025 23:05:46.786 * Node 940f25bab80d655fae5d2c00f7e5d053f18a0aa3 () is now a replica of node 13aa946ae073b283903d0b625ce1c86adb50c18e () in shard 30fd42788a34ad1993a9d803fc85dc59ab50a555
### Starting test New replica inherits importing slot in tests/unit/cluster/slot-migration.tcl
97181:M 03 May 2025 23:05:47.139 - Accepting cluster node connection from 127.0.0.1:58266
97181:M 03 May 2025 23:05:47.214 * A failover occurred in shard 17aa912c73fdfd2f9d07ca60ab9e8177abdb5853; node 7784938381600c37ae962ee96f2a2eac0a305a61 () failed over to node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () with a config epoch of 7
97181:M 03 May 2025 23:05:47.216 * Node 7784938381600c37ae962ee96f2a2eac0a305a61 () is now a replica of node 6d062984222c6b8fea11f573fcb0ebcb21d117bb () in shard 17aa912c73fdfd2f9d07ca60ab9e8177abdb5853
### Starting test Check for memory leaks (pid 97246) in tests/unit/cluster/slot-migration.tcl
97181:M 03 May 2025 23:05:48.624 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
### Starting test Check for memory leaks (pid 97221) in tests/unit/cluster/slot-migration.tcl
97181:M 03 May 2025 23:05:48.725 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:48.826 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:48.927 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.028 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.130 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.231 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.332 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.433 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.535 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.636 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.737 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.838 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.839 - Connection with Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb at 127.0.0.1:35651 failed: Connection refused
97181:M 03 May 2025 23:05:49.897 - Client closed connection id=3 addr=127.0.0.1:56104 laddr=127.0.0.1:25650 fd=14 name= age=20 idle=2 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|slots user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=1262 tot-net-out=35713 tot-cmds=42
97181:M 03 May 2025 23:05:49.940 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:49.942 - Connection with Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb at 127.0.0.1:35651 failed: Connection refused
97181:M 03 May 2025 23:05:50.041 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:50.042 - Connection with Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb at 127.0.0.1:35651 failed: Connection refused
97181:M 03 May 2025 23:05:50.142 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:50.151 - Connection with Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb at 127.0.0.1:35651 failed: Connection refused
97181:M 03 May 2025 23:05:50.986 # Cluster state changed: fail
97181:M 03 May 2025 23:05:50.989 # Cluster is currently down: I am part of a minority partition.
97181:M 03 May 2025 23:05:50.997 - Accepting cluster node connection from 127.0.0.1:59918
97181:M 03 May 2025 23:05:51.002 - Accepting cluster node connection from 127.0.0.1:59920
97181:M 03 May 2025 23:05:51.003 - Accepting cluster node connection from 127.0.0.1:59985
97181:M 03 May 2025 23:05:51.006 - Connection with Node 13aa946ae073b283903d0b625ce1c86adb50c18e at 127.0.0.1:35652 failed: Connection refused
97181:M 03 May 2025 23:05:51.006 - Connection with Node 6d062984222c6b8fea11f573fcb0ebcb21d117bb at 127.0.0.1:35651 failed: Connection refused
97181:signal-handler (1746281151) Received SIGTERM scheduling shutdown...
97181:M 03 May 2025 23:05:51.100 * User requested shutdown...
97181:M 03 May 2025 23:05:51.106 * 1 of 1 replicas are in sync when shutting down.
97181:M 03 May 2025 23:05:51.109 * Removing the pid file.
97181:M 03 May 2025 23:05:51.109 * Saving the cluster configuration file before exiting.
97181:M 03 May 2025 23:05:51.150 * Removing the unix socket file.
97181:M 03 May 2025 23:05:51.150 # Valkey is now ready to exit, bye bye...
