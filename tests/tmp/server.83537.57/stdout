### Starting server for test 
90313:M 03 May 2025 23:04:33.178 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
90313:M 03 May 2025 23:04:33.178 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
90313:M 03 May 2025 23:04:33.178 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=90313, just started
90313:M 03 May 2025 23:04:33.178 * Configuration loaded
90313:M 03 May 2025 23:04:33.178 * Increased maximum number of open files to 10032 (it was originally set to 256).
90313:M 03 May 2025 23:04:33.178 * monotonic clock: POSIX clock_gettime
90313:M 03 May 2025 23:04:33.178 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 27139
 |###|   .+###############+.   |###|    PID: 90313                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

90313:M 03 May 2025 23:04:33.178 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
90313:M 03 May 2025 23:04:33.178 * No cluster configuration found, I'm 2f19defdee7b14fd731b1278a4cfae797b1d5e1b
90313:M 03 May 2025 23:04:33.187 * Server initialized
90313:M 03 May 2025 23:04:33.187 * Ready to accept connections tcp
90313:M 03 May 2025 23:04:33.187 * Ready to accept connections unix
90313:M 03 May 2025 23:04:33.301 - Accepted 127.0.0.1:60729
90313:M 03 May 2025 23:04:33.302 - Client closed connection id=2 addr=127.0.0.1:60729 laddr=127.0.0.1:27139 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
90313:M 03 May 2025 23:04:33.316 - Accepted 127.0.0.1:60736
90313:M 03 May 2025 23:04:33.532 # Missing implement of connection type tls
90313:M 03 May 2025 23:04:33.599 - Accepting cluster node connection from 127.0.0.1:60835
90313:M 03 May 2025 23:04:33.599 * IP address for this node updated to 127.0.0.1
90313:M 03 May 2025 23:04:33.718 - Accepting cluster node connection from 127.0.0.1:60874
90313:M 03 May 2025 23:04:33.742 - Accepting cluster node connection from 127.0.0.1:60892
90313:M 03 May 2025 23:04:33.745 - Accepting cluster node connection from 127.0.0.1:60895
90313:M 03 May 2025 23:04:33.766 - Accepting cluster node connection from 127.0.0.1:60900
90313:M 03 May 2025 23:04:33.773 * configEpoch collision with node 52c59b8008c20139cf8c1790c7ab6b6d4dea759c (). configEpoch set to 2
90313:M 03 May 2025 23:04:33.872 - Accepting cluster node connection from 127.0.0.1:60943
90313:M 03 May 2025 23:04:33.878 - Accepting cluster node connection from 127.0.0.1:60954
90313:M 03 May 2025 23:04:33.878 - Accepting cluster node connection from 127.0.0.1:60959
90313:M 03 May 2025 23:04:33.888 - Accepting cluster node connection from 127.0.0.1:60972
90313:M 03 May 2025 23:04:33.899 - Accepting cluster node connection from 127.0.0.1:60979
90313:M 03 May 2025 23:04:33.902 * Successfully completed handshake with 1b93d2ac80695a809c4287d2a2985cb24e9ab913 ()
90313:M 03 May 2025 23:04:33.906 * configEpoch collision with node 3a62851936bf82cf0c6cb931bc269cf57b3fefee (). configEpoch set to 4
90313:M 03 May 2025 23:04:33.962 - Accepting cluster node connection from 127.0.0.1:61012
90313:M 03 May 2025 23:04:33.972 - Accepting cluster node connection from 127.0.0.1:61019
90313:M 03 May 2025 23:04:33.982 - Accepting cluster node connection from 127.0.0.1:61030
90313:M 03 May 2025 23:04:33.983 - Accepting cluster node connection from 127.0.0.1:61055
90313:M 03 May 2025 23:04:33.983 * Successfully completed handshake with 82b03f7034c6fb952a9e38c92cbe15834f4a5707 ()
90313:M 03 May 2025 23:04:33.984 * configEpoch collision with node 8e1d768a81e6c4c2da4f5c10eff176243ae189c1 (). configEpoch set to 5
90313:M 03 May 2025 23:04:34.095 * configEpoch collision with node 67ecf2e0ed00d28bc251f9ffabcc36662d96008f (). configEpoch set to 6
90313:M 03 May 2025 23:04:34.180 * configEpoch collision with node 3a62851936bf82cf0c6cb931bc269cf57b3fefee (). configEpoch set to 7
90313:M 03 May 2025 23:04:34.341 * configEpoch collision with node 35d839f7ab23eecc18df5343cc1b3b843ec20699 (). configEpoch set to 8
90313:M 03 May 2025 23:04:34.345 * configEpoch collision with node 3a62851936bf82cf0c6cb931bc269cf57b3fefee (). configEpoch set to 9
90313:M 03 May 2025 23:04:34.515 * configEpoch collision with node 35d839f7ab23eecc18df5343cc1b3b843ec20699 (). configEpoch set to 11
90313:M 03 May 2025 23:04:34.600 * configEpoch collision with node 3a62851936bf82cf0c6cb931bc269cf57b3fefee (). configEpoch set to 12
90313:M 03 May 2025 23:04:35.058 * Node 44ed5d054aa5a3719ffc90ac535cc59aa549538d () is no longer primary of shard 2d0ccf284a6cc07caa2cf9f0bee9b695c767ec3d; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.058 * Node 44ed5d054aa5a3719ffc90ac535cc59aa549538d () is now part of shard 8bc3cbc4fa26996c2f12a7182a1a71654d89f9ec
90313:M 03 May 2025 23:04:35.058 * Node 44ed5d054aa5a3719ffc90ac535cc59aa549538d () is now a replica of node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f () in shard 8bc3cbc4fa26996c2f12a7182a1a71654d89f9ec
90313:M 03 May 2025 23:04:35.059 * Node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () is no longer primary of shard 180d42d9cb5380cdbb62b6c8dea2199e8e1ca57c; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.059 * Node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () is now part of shard 8bc3cbc4fa26996c2f12a7182a1a71654d89f9ec
90313:M 03 May 2025 23:04:35.059 * Node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () is now a replica of node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f () in shard 8bc3cbc4fa26996c2f12a7182a1a71654d89f9ec
90313:M 03 May 2025 23:04:35.061 - Accepted 127.0.0.1:61402
90313:M 03 May 2025 23:04:35.061 * Node 436734c625d5aedb2b704be611deb2dce3d88e3f () is no longer primary of shard 0537089c09b30876b78fee2d0415e23ecd570d61; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.061 * Node 436734c625d5aedb2b704be611deb2dce3d88e3f () is now part of shard c71388c83ad37ff21fdb18bddbb022c81c8b1ccd
90313:M 03 May 2025 23:04:35.061 * Node 436734c625d5aedb2b704be611deb2dce3d88e3f () is now a replica of node 2f19defdee7b14fd731b1278a4cfae797b1d5e1b () in shard c71388c83ad37ff21fdb18bddbb022c81c8b1ccd
90313:M 03 May 2025 23:04:35.062 - Accepted 127.0.0.1:61403
90313:M 03 May 2025 23:04:35.062 * Node 0416f260934c9d4aadb8a7c868e4c1dffe4a8a7e () is no longer primary of shard 2d56c0096cd9917b9fe0364225ac7ae83b6c561d; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.062 * Node 0416f260934c9d4aadb8a7c868e4c1dffe4a8a7e () is now part of shard c71388c83ad37ff21fdb18bddbb022c81c8b1ccd
90313:M 03 May 2025 23:04:35.062 * Node 0416f260934c9d4aadb8a7c868e4c1dffe4a8a7e () is now a replica of node 2f19defdee7b14fd731b1278a4cfae797b1d5e1b () in shard c71388c83ad37ff21fdb18bddbb022c81c8b1ccd
90313:M 03 May 2025 23:04:35.063 * Replica 127.0.0.1:27134 asks for synchronization
90313:M 03 May 2025 23:04:35.063 * Full resync requested by replica 127.0.0.1:27134
90313:M 03 May 2025 23:04:35.063 * Replication backlog created, my new replication IDs are '00c7a798e4eedd911d1c7444732085d19c353c49' and '0000000000000000000000000000000000000000'
90313:M 03 May 2025 23:04:35.063 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
90313:M 03 May 2025 23:04:35.065 * Background RDB transfer started by pid 90492 to pipe through parent process
90492:C 03 May 2025 23:04:35.066 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
90313:M 03 May 2025 23:04:35.066 * Node 1b93d2ac80695a809c4287d2a2985cb24e9ab913 () is no longer primary of shard ddaa5cbaf9eccfcad7b834df78eb1c9ec4570179; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.068 * Node 1b93d2ac80695a809c4287d2a2985cb24e9ab913 () is now part of shard a3b20d53ca7ee48b965a111ad52dcd7a1589ba5b
90313:M 03 May 2025 23:04:35.068 * Node 1b93d2ac80695a809c4287d2a2985cb24e9ab913 () is now a replica of node 3a62851936bf82cf0c6cb931bc269cf57b3fefee () in shard a3b20d53ca7ee48b965a111ad52dcd7a1589ba5b
90313:M 03 May 2025 23:04:35.069 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
90313:M 03 May 2025 23:04:35.069 * Replica 127.0.0.1:27129 asks for synchronization
90313:M 03 May 2025 23:04:35.069 * Full resync requested by replica 127.0.0.1:27129
90313:M 03 May 2025 23:04:35.069 * Current BGSAVE has socket target. Waiting for next BGSAVE for SYNC
90313:M 03 May 2025 23:04:35.070 * Node 82b03f7034c6fb952a9e38c92cbe15834f4a5707 () is no longer primary of shard ae7f171b20951da4c6189dcb9d3615b314f71111; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.070 * Node 82b03f7034c6fb952a9e38c92cbe15834f4a5707 () is now part of shard a3b20d53ca7ee48b965a111ad52dcd7a1589ba5b
90313:M 03 May 2025 23:04:35.070 * Node 82b03f7034c6fb952a9e38c92cbe15834f4a5707 () is now a replica of node 3a62851936bf82cf0c6cb931bc269cf57b3fefee () in shard a3b20d53ca7ee48b965a111ad52dcd7a1589ba5b
90313:M 03 May 2025 23:04:35.075 * Background RDB transfer terminated with success
90313:M 03 May 2025 23:04:35.075 * Streamed RDB transfer with replica 127.0.0.1:27134 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
90313:M 03 May 2025 23:04:35.075 * Synchronization with replica 127.0.0.1:27134 succeeded
90313:M 03 May 2025 23:04:35.075 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
90313:M 03 May 2025 23:04:35.076 * Background RDB transfer started by pid 90496 to pipe through parent process
90496:C 03 May 2025 23:04:35.077 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
90313:M 03 May 2025 23:04:35.077 * Node 72ba549e6c7a016d5207e4d1f8c948d98259d01e () is no longer primary of shard b6b10054b1a4453141d3caa1dbe97b9f86ea5fd7; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.077 * Node 72ba549e6c7a016d5207e4d1f8c948d98259d01e () is now part of shard 29c52bbf405313a5688022daaf56e32e902edbef
90313:M 03 May 2025 23:04:35.077 * Node 72ba549e6c7a016d5207e4d1f8c948d98259d01e () is now a replica of node 67ecf2e0ed00d28bc251f9ffabcc36662d96008f () in shard 29c52bbf405313a5688022daaf56e32e902edbef
90313:M 03 May 2025 23:04:35.077 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
90313:M 03 May 2025 23:04:35.081 * Node 3887020ff23e1c46372ca563eeb5dee34a842686 () is no longer primary of shard 51480f4f2b1b9e8ec6dd1685fa02cc2aae4cc668; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.086 * Node 3887020ff23e1c46372ca563eeb5dee34a842686 () is now part of shard 29c52bbf405313a5688022daaf56e32e902edbef
90313:M 03 May 2025 23:04:35.086 * Node 3887020ff23e1c46372ca563eeb5dee34a842686 () is now a replica of node 67ecf2e0ed00d28bc251f9ffabcc36662d96008f () in shard 29c52bbf405313a5688022daaf56e32e902edbef
90313:M 03 May 2025 23:04:35.087 * Background RDB transfer terminated with success
90313:M 03 May 2025 23:04:35.087 * Streamed RDB transfer with replica 127.0.0.1:27129 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
90313:M 03 May 2025 23:04:35.087 * Synchronization with replica 127.0.0.1:27129 succeeded
90313:M 03 May 2025 23:04:35.094 * Node cdd1c02ce004b85c008672f097bf7d1b567dd155 () is no longer primary of shard 93036f9d4c38547040220684b69de1dd7b41b181; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.094 * Node cdd1c02ce004b85c008672f097bf7d1b567dd155 () is now part of shard 77442427536562f44e06c2f31fa91beeff15f678
90313:M 03 May 2025 23:04:35.094 * Node cdd1c02ce004b85c008672f097bf7d1b567dd155 () is now a replica of node 52c59b8008c20139cf8c1790c7ab6b6d4dea759c () in shard 77442427536562f44e06c2f31fa91beeff15f678
90313:M 03 May 2025 23:04:35.096 * Node 8e1d768a81e6c4c2da4f5c10eff176243ae189c1 () is no longer primary of shard 0f23ae42ec2c63f62eedfe14a8454c149acf9b5b; removed all 0 slot(s) it used to own
90313:M 03 May 2025 23:04:35.096 * Node 8e1d768a81e6c4c2da4f5c10eff176243ae189c1 () is now part of shard 77442427536562f44e06c2f31fa91beeff15f678
90313:M 03 May 2025 23:04:35.096 * Node 8e1d768a81e6c4c2da4f5c10eff176243ae189c1 () is now a replica of node 52c59b8008c20139cf8c1790c7ab6b6d4dea759c () in shard 77442427536562f44e06c2f31fa91beeff15f678
90313:M 03 May 2025 23:04:35.096 # DEBUG LOG: ========== I am primary 1 ==========
90313:M 03 May 2025 23:04:35.247 * Cluster state changed: ok
### Starting test Cluster is up in tests/unit/cluster/slave-selection.tcl
### Starting test The first master has actually two slaves in tests/unit/cluster/slave-selection.tcl
### Starting test CLUSTER SLAVES and CLUSTER REPLICAS output is consistent in tests/unit/cluster/slave-selection.tcl
### Starting test Slaves of #0 are instance #5 and #10 as expected in tests/unit/cluster/slave-selection.tcl
### Starting test Instance #5 and #10 synced with the master in tests/unit/cluster/slave-selection.tcl
90313:M 03 May 2025 23:04:44.379 - Accepted 127.0.0.1:64306
### Starting test Slaves are both able to receive and acknowledge writes in tests/unit/cluster/slave-selection.tcl
### Starting test Write data while slave #10 is paused and can't receive it in tests/unit/cluster/slave-selection.tcl
90313:M 03 May 2025 23:04:47.740 * Node 52c59b8008c20139cf8c1790c7ab6b6d4dea759c () reported node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () as not reachable.
90313:M 03 May 2025 23:04:47.751 * Node 67ecf2e0ed00d28bc251f9ffabcc36662d96008f () reported node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () as not reachable.
90313:M 03 May 2025 23:04:47.751 * Marking node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () as failing (quorum reached).
90313:M 03 May 2025 23:04:47.753 * Node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f () reported node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () as not reachable.
90313:M 03 May 2025 23:04:47.754 * Node 3a62851936bf82cf0c6cb931bc269cf57b3fefee () reported node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () as not reachable.
90313:M 03 May 2025 23:04:48.758 - DB 0: 17 keys (0 volatile) in 119 slots HT.
90313:M 03 May 2025 23:04:53.798 - DB 0: 17 keys (0 volatile) in 119 slots HT.
90313:M 03 May 2025 23:04:54.469 * Clear FAIL state for node 35d839f7ab23eecc18df5343cc1b3b843ec20699 (): replica is reachable again.
### Starting test Wait for instance #5 (and not #10) to turn into a master in tests/unit/cluster/slave-selection.tcl
90313:M 03 May 2025 23:04:54.705 * Node 3a62851936bf82cf0c6cb931bc269cf57b3fefee () reported node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () is back online.
90313:M 03 May 2025 23:04:54.906 * Node 52c59b8008c20139cf8c1790c7ab6b6d4dea759c () reported node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () is back online.
90313:M 03 May 2025 23:04:55.007 * Node 67ecf2e0ed00d28bc251f9ffabcc36662d96008f () reported node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () is back online.
90313:M 03 May 2025 23:04:57.627 * Node 67ecf2e0ed00d28bc251f9ffabcc36662d96008f () reported node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f () as not reachable.
90313:M 03 May 2025 23:04:57.731 * FAIL message received from 3887020ff23e1c46372ca563eeb5dee34a842686 () about bb4527f3a3f553683e8c73ad0688c0caa1d87e6f ()
90313:M 03 May 2025 23:04:57.734 # Cluster state changed: fail
90313:M 03 May 2025 23:04:57.735 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
90313:M 03 May 2025 23:04:57.831 * Node 3a62851936bf82cf0c6cb931bc269cf57b3fefee () reported node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f () as not reachable.
90313:M 03 May 2025 23:04:58.029 * Node 52c59b8008c20139cf8c1790c7ab6b6d4dea759c () reported node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f () as not reachable.
90313:M 03 May 2025 23:04:58.429 * Failover auth granted to 44ed5d054aa5a3719ffc90ac535cc59aa549538d () for epoch 15
90313:M 03 May 2025 23:04:58.461 * Cluster state changed: ok
### Starting test Wait for the node #10 to return alive before ending the test in tests/unit/cluster/slave-selection.tcl
90313:M 03 May 2025 23:04:58.523 * Node 35d839f7ab23eecc18df5343cc1b3b843ec20699 () is now a replica of node 44ed5d054aa5a3719ffc90ac535cc59aa549538d () in shard 8bc3cbc4fa26996c2f12a7182a1a71654d89f9ec
### Starting test Cluster should eventually be up again in tests/unit/cluster/slave-selection.tcl
### Starting test Node #10 should eventually replicate node #5 in tests/unit/cluster/slave-selection.tcl
90313:M 03 May 2025 23:04:58.859 - DB 0: 17 keys (0 volatile) in 119 slots HT.
90313:M 03 May 2025 23:04:58.864 * Node 44ed5d054aa5a3719ffc90ac535cc59aa549538d () reported node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f () as not reachable.
### Starting test Check for memory leaks (pid 90347) in tests/unit/cluster/slave-selection.tcl
90313:M 03 May 2025 23:05:00.146 - Client closed connection id=3 addr=127.0.0.1:60736 laddr=127.0.0.1:27139 fd=14 name= age=27 idle=2 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|info user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=631 tot-net-out=16404 tot-cmds=20
90313:M 03 May 2025 23:05:00.168 - Connection with Node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f at 127.0.0.1:37140 failed: Connection refused
90313:M 03 May 2025 23:05:00.268 - Connection with Node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f at 127.0.0.1:37140 failed: Connection refused
90313:M 03 May 2025 23:05:01.028 - Connection with Node bb4527f3a3f553683e8c73ad0688c0caa1d87e6f at 127.0.0.1:37140 failed: Connection refused
90313:signal-handler (1746281101) Received SIGTERM scheduling shutdown...
90313:M 03 May 2025 23:05:01.129 * User requested shutdown...
90313:M 03 May 2025 23:05:01.131 * 2 of 2 replicas are in sync when shutting down.
90313:M 03 May 2025 23:05:01.131 * Removing the pid file.
90313:M 03 May 2025 23:05:01.131 * Saving the cluster configuration file before exiting.
90313:M 03 May 2025 23:05:01.143 * Removing the unix socket file.
90313:M 03 May 2025 23:05:01.150 # Valkey is now ready to exit, bye bye...
