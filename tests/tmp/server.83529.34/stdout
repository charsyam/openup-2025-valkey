### Starting server for test 
88851:M 03 May 2025 23:04:22.934 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
88851:M 03 May 2025 23:04:22.934 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
88851:M 03 May 2025 23:04:22.934 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=88851, just started
88851:M 03 May 2025 23:04:22.934 * Configuration loaded
88851:M 03 May 2025 23:04:22.934 * Increased maximum number of open files to 10032 (it was originally set to 256).
88851:M 03 May 2025 23:04:22.934 * monotonic clock: POSIX clock_gettime
88851:M 03 May 2025 23:04:22.934 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 23127
 |###|   .+###############+.   |###|    PID: 88851                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

88851:M 03 May 2025 23:04:22.934 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
88851:M 03 May 2025 23:04:22.934 * No cluster configuration found, I'm 7153ae3b781af1d605528196125b59db48c35204
88851:M 03 May 2025 23:04:22.941 * Server initialized
88851:M 03 May 2025 23:04:22.941 * Ready to accept connections tcp
88851:M 03 May 2025 23:04:22.941 * Ready to accept connections unix
88851:M 03 May 2025 23:04:23.059 - Accepted 127.0.0.1:60060
88851:M 03 May 2025 23:04:23.059 - Client closed connection id=2 addr=127.0.0.1:60060 laddr=127.0.0.1:23127 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
88851:M 03 May 2025 23:04:23.070 - Accepted 127.0.0.1:60061
88851:M 03 May 2025 23:04:23.071 * Cluster meet 127.0.0.1:23126 (user request from 'id=3 addr=127.0.0.1:60061 laddr=127.0.0.1:23127 fd=14 name= user=default lib-name= lib-ver=').
88851:M 03 May 2025 23:04:23.071 * Cluster meet 127.0.0.1:23125 (user request from 'id=3 addr=127.0.0.1:60061 laddr=127.0.0.1:23127 fd=14 name= user=default lib-name= lib-ver=').
88851:M 03 May 2025 23:04:23.072 * Cluster meet 127.0.0.1:23124 (user request from 'id=3 addr=127.0.0.1:60061 laddr=127.0.0.1:23127 fd=14 name= user=default lib-name= lib-ver=').
88851:M 03 May 2025 23:04:23.072 * Cluster meet 127.0.0.1:23123 (user request from 'id=3 addr=127.0.0.1:60061 laddr=127.0.0.1:23127 fd=14 name= user=default lib-name= lib-ver=').
88851:M 03 May 2025 23:04:23.072 * Cluster meet 127.0.0.1:23122 (user request from 'id=3 addr=127.0.0.1:60061 laddr=127.0.0.1:23127 fd=14 name= user=default lib-name= lib-ver=').
88851:M 03 May 2025 23:04:23.074 # Missing implement of connection type tls
88851:M 03 May 2025 23:04:23.145 - Accepting cluster node connection from 127.0.0.1:60067
88851:M 03 May 2025 23:04:23.145 * IP address for this node updated to 127.0.0.1
88851:M 03 May 2025 23:04:23.145 * Successfully completed handshake with 729ce5e54cb4b7b885054e62242a94ebc05fafec ()
88851:M 03 May 2025 23:04:23.145 * configEpoch collision with node 729ce5e54cb4b7b885054e62242a94ebc05fafec (). configEpoch set to 1
88851:M 03 May 2025 23:04:23.182 - Accepting cluster node connection from 127.0.0.1:60071
88851:M 03 May 2025 23:04:23.182 * Successfully completed handshake with eb27e8a31fc4f4931303e6e99823163f120ec625 ()
88851:M 03 May 2025 23:04:23.189 - Accepting cluster node connection from 127.0.0.1:60072
88851:M 03 May 2025 23:04:23.189 * Successfully completed handshake with 5e7258148493b50d1d5c17f39eb38fd9bd2429eb ()
88851:M 03 May 2025 23:04:23.191 - Accepting cluster node connection from 127.0.0.1:60073
88851:M 03 May 2025 23:04:23.191 * Successfully completed handshake with 773fb3ff4264425e11fe75778f273824f43ac0ee ()
88851:M 03 May 2025 23:04:23.237 - Accepting cluster node connection from 127.0.0.1:60074
88851:M 03 May 2025 23:04:23.237 * Successfully completed handshake with 2d591a45518e281c917b205749fe5c4e702c9f77 ()
88851:M 03 May 2025 23:04:23.311 * configEpoch collision with node 773fb3ff4264425e11fe75778f273824f43ac0ee (). configEpoch set to 3
88851:M 03 May 2025 23:04:23.456 - Accepted 127.0.0.1:60102
88851:M 03 May 2025 23:04:23.459 * Node 5e7258148493b50d1d5c17f39eb38fd9bd2429eb () is no longer primary of shard 404af2c90d112dd12f28e2540f99637c8d4dea41; removed all 0 slot(s) it used to own
88851:M 03 May 2025 23:04:23.459 * Node 5e7258148493b50d1d5c17f39eb38fd9bd2429eb () is now part of shard 64ab741a08553038e001253c530648617c44faa9
88851:M 03 May 2025 23:04:23.459 * Node 5e7258148493b50d1d5c17f39eb38fd9bd2429eb () is now a replica of node 7153ae3b781af1d605528196125b59db48c35204 () in shard 64ab741a08553038e001253c530648617c44faa9
88851:M 03 May 2025 23:04:23.460 * Replica 127.0.0.1:23124 asks for synchronization
88851:M 03 May 2025 23:04:23.460 * Full resync requested by replica 127.0.0.1:23124
88851:M 03 May 2025 23:04:23.460 * Replication backlog created, my new replication IDs are '32976aae6013b4071bfdfd529a54993a3dbe1002' and '0000000000000000000000000000000000000000'
88851:M 03 May 2025 23:04:23.460 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
88851:M 03 May 2025 23:04:23.461 * Background RDB transfer started by pid 88921 to pipe through parent process
88851:M 03 May 2025 23:04:23.461 * Node 773fb3ff4264425e11fe75778f273824f43ac0ee () is no longer primary of shard 5d3b1754a88c94b35868328128019186537968d9; removed all 0 slot(s) it used to own
88851:M 03 May 2025 23:04:23.461 * Node 773fb3ff4264425e11fe75778f273824f43ac0ee () is now part of shard c61924e7bb3910934136b69ca96be7537f05028d
88851:M 03 May 2025 23:04:23.461 * Node 773fb3ff4264425e11fe75778f273824f43ac0ee () is now a replica of node eb27e8a31fc4f4931303e6e99823163f120ec625 () in shard c61924e7bb3910934136b69ca96be7537f05028d
88851:M 03 May 2025 23:04:23.462 * Node 729ce5e54cb4b7b885054e62242a94ebc05fafec () is no longer primary of shard b1e41d1dc30bee2a8be5eb1499f9a5e9333ffed6; removed all 0 slot(s) it used to own
88851:M 03 May 2025 23:04:23.462 * Node 729ce5e54cb4b7b885054e62242a94ebc05fafec () is now part of shard 344f71891258bca2234d8df2e7351b823bae7e8e
88851:M 03 May 2025 23:04:23.462 * Node 729ce5e54cb4b7b885054e62242a94ebc05fafec () is now a replica of node 2d591a45518e281c917b205749fe5c4e702c9f77 () in shard 344f71891258bca2234d8df2e7351b823bae7e8e
88921:C 03 May 2025 23:04:23.461 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
88851:M 03 May 2025 23:04:23.462 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
88851:M 03 May 2025 23:04:23.462 # DEBUG LOG: ========== I am primary 0 ==========
88851:M 03 May 2025 23:04:23.465 * Background RDB transfer terminated with success
88851:M 03 May 2025 23:04:23.465 * Streamed RDB transfer with replica 127.0.0.1:23124 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
88851:M 03 May 2025 23:04:23.468 * Synchronization with replica 127.0.0.1:23124 succeeded
88851:M 03 May 2025 23:04:24.953 * Cluster state changed: ok
### Starting test Cluster is up in tests/unit/cluster/pubsubshard-slot-migration.tcl
88851:M 03 May 2025 23:04:33.283 - Accepted 127.0.0.1:60721
88851:M 03 May 2025 23:04:33.284 - Client closed connection id=15 addr=127.0.0.1:60721 laddr=127.0.0.1:23127 fd=26 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=cluster|nodes user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=28 tot-net-out=747 tot-cmds=1
88851:M 03 May 2025 23:04:33.284 - Accepted 127.0.0.1:60727
### Starting test Migrate a slot, verify client receives sunsubscribe on primary serving the slot. in tests/unit/cluster/pubsubshard-slot-migration.tcl
### Starting test Client subscribes to multiple channels, migrate a slot, verify client receives sunsubscribe on primary serving the slot. in tests/unit/cluster/pubsubshard-slot-migration.tcl
88851:M 03 May 2025 23:04:33.305 - Accepted 127.0.0.1:60734
88851:M 03 May 2025 23:04:33.305 * Migrating slot 1672 to node eb27e8a31fc4f4931303e6e99823163f120ec625 ()
88851:M 03 May 2025 23:04:33.306 * Assigning slot 1672 to node eb27e8a31fc4f4931303e6e99823163f120ec625 () in shard c61924e7bb3910934136b69ca96be7537f05028d
88851:M 03 May 2025 23:04:33.316 - Client closed connection id=17 addr=127.0.0.1:60734 laddr=127.0.0.1:23127 fd=27 name= age=0 idle=0 flags=P capa= db=0 sub=0 psub=0 ssub=1 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33848 events=r cmd=ssubscribe user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=60 tot-net-out=180 tot-cmds=2
### Starting test Migrate a slot, verify client receives sunsubscribe on replica serving the slot. in tests/unit/cluster/pubsubshard-slot-migration.tcl
88851:M 03 May 2025 23:04:33.316 - Accepted 127.0.0.1:60735
88851:M 03 May 2025 23:04:33.316 - Client closed connection id=18 addr=127.0.0.1:60735 laddr=127.0.0.1:23127 fd=27 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=cluster|nodes user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=28 tot-net-out=762 tot-cmds=1
88851:M 03 May 2025 23:04:33.317 - Accepted 127.0.0.1:60742
### Starting test Move a replica to another primary, verify client receives sunsubscribe on replica serving the slot. in tests/unit/cluster/pubsubshard-slot-migration.tcl
88851:M 03 May 2025 23:04:33.413 - Accepted 127.0.0.1:60764
88851:M 03 May 2025 23:04:33.413 - Client closed connection id=20 addr=127.0.0.1:60764 laddr=127.0.0.1:23127 fd=28 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=cluster|nodes user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=28 tot-net-out=780 tot-cmds=1
88851:M 03 May 2025 23:04:33.414 - Accepted 127.0.0.1:60770
88851:M 03 May 2025 23:04:33.414 * Slot 8379 is migrated from node eb27e8a31fc4f4931303e6e99823163f120ec625 () in shard c61924e7bb3910934136b69ca96be7537f05028d to node 2d591a45518e281c917b205749fe5c4e702c9f77 () in shard 344f71891258bca2234d8df2e7351b823bae7e8e.
88851:M 03 May 2025 23:04:33.436 - Client closed connection id=10 addr=127.0.0.1:60102 laddr=127.0.0.1:23127 fd=25 name= age=10 idle=0 flags=S capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=1 omem=16920 tot-mem=35352 events=r cmd=replconf user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=739 tot-net-out=337 tot-cmds=19
88851:M 03 May 2025 23:04:33.444 * Connection with replica 127.0.0.1:23124 lost.
88851:M 03 May 2025 23:04:33.454 * Node 5e7258148493b50d1d5c17f39eb38fd9bd2429eb () is now a replica of node eb27e8a31fc4f4931303e6e99823163f120ec625 () in shard c61924e7bb3910934136b69ca96be7537f05028d
### Starting test Delete a slot, verify sunsubscribe message in tests/unit/cluster/pubsubshard-slot-migration.tcl
### Starting test Reset cluster, verify sunsubscribe message in tests/unit/cluster/pubsubshard-slot-migration.tcl
88851:M 03 May 2025 23:04:33.466 - Client closed connection id=16 addr=127.0.0.1:60727 laddr=127.0.0.1:23127 fd=26 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=8 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|keyslot user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=577 tot-net-out=66 tot-cmds=13
88851:M 03 May 2025 23:04:33.466 - Client closed connection id=3 addr=127.0.0.1:60061 laddr=127.0.0.1:23127 fd=14 name= age=10 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=520 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|info user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=6141 tot-net-out=259989 tot-cmds=206
88851:M 03 May 2025 23:04:33.480 * FAIL message received from 729ce5e54cb4b7b885054e62242a94ebc05fafec () about 2d591a45518e281c917b205749fe5c4e702c9f77 ()
88851:M 03 May 2025 23:04:33.480 # Cluster state changed: fail
88851:M 03 May 2025 23:04:33.480 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
88851:M 03 May 2025 23:04:33.527 * PONG contains mismatching sender ID. About node 2d591a45518e281c917b205749fe5c4e702c9f77 () in shard 344f71891258bca2234d8df2e7351b823bae7e8e added 10456 ms ago, having flags 7433
88851:signal-handler (1746281074) Received SIGTERM scheduling shutdown...
88851:M 03 May 2025 23:04:34.463 * Failover auth granted to 729ce5e54cb4b7b885054e62242a94ebc05fafec () for epoch 8
88851:M 03 May 2025 23:04:34.472 * User requested shutdown...
88851:M 03 May 2025 23:04:34.478 * Removing the pid file.
88851:M 03 May 2025 23:04:34.484 * Saving the cluster configuration file before exiting.
88851:M 03 May 2025 23:04:34.552 * Removing the unix socket file.
88851:M 03 May 2025 23:04:34.559 # Valkey is now ready to exit, bye bye...
