### Starting server for test 
96430:M 03 May 2025 23:05:21.679 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
96430:M 03 May 2025 23:05:21.679 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
96430:M 03 May 2025 23:05:21.679 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=96430, just started
96430:M 03 May 2025 23:05:21.679 * Configuration loaded
96430:M 03 May 2025 23:05:21.679 * Increased maximum number of open files to 10032 (it was originally set to 256).
96430:M 03 May 2025 23:05:21.679 * monotonic clock: POSIX clock_gettime
96430:M 03 May 2025 23:05:21.680 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 27156
 |###|   .+###############+.   |###|    PID: 96430                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

96430:M 03 May 2025 23:05:21.680 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
96430:M 03 May 2025 23:05:21.680 * No cluster configuration found, I'm 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2
96430:M 03 May 2025 23:05:21.724 * Server initialized
96430:M 03 May 2025 23:05:21.732 * Ready to accept connections tcp
96430:M 03 May 2025 23:05:21.734 * Ready to accept connections unix
96430:M 03 May 2025 23:05:21.881 - Accepted 127.0.0.1:51372
96430:M 03 May 2025 23:05:21.882 - Client closed connection id=2 addr=127.0.0.1:51372 laddr=127.0.0.1:27156 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
96430:M 03 May 2025 23:05:21.951 - Accepted 127.0.0.1:51420
96430:M 03 May 2025 23:05:22.916 - Accepting cluster node connection from 127.0.0.1:52165
96430:M 03 May 2025 23:05:22.922 * IP address for this node updated to 127.0.0.1
96430:M 03 May 2025 23:05:23.045 - Accepting cluster node connection from 127.0.0.1:52338
96430:M 03 May 2025 23:05:23.124 * Successfully completed handshake with 071f788bd26ee028f2ea656a5a2139f79f12d6ad ()
96430:M 03 May 2025 23:05:23.126 - Accepting cluster node connection from 127.0.0.1:52466
96430:M 03 May 2025 23:05:23.281 - Accepting cluster node connection from 127.0.0.1:52581
96430:M 03 May 2025 23:05:23.286 - Accepting cluster node connection from 127.0.0.1:52634
96430:M 03 May 2025 23:05:23.290 - Accepting cluster node connection from 127.0.0.1:52662
96430:M 03 May 2025 23:05:23.293 - Accepting cluster node connection from 127.0.0.1:52708
96430:M 03 May 2025 23:05:23.296 - Accepting cluster node connection from 127.0.0.1:52738
96430:M 03 May 2025 23:05:23.304 - Accepting cluster node connection from 127.0.0.1:52744
96430:M 03 May 2025 23:05:23.374 - Accepting cluster node connection from 127.0.0.1:52881
96430:M 03 May 2025 23:05:23.393 - Accepting cluster node connection from 127.0.0.1:52898
96430:M 03 May 2025 23:05:23.401 - Accepting cluster node connection from 127.0.0.1:52934
96430:M 03 May 2025 23:05:23.408 - Accepting cluster node connection from 127.0.0.1:52956
96430:M 03 May 2025 23:05:23.420 - Accepting cluster node connection from 127.0.0.1:52996
96430:M 03 May 2025 23:05:23.423 - Accepting cluster node connection from 127.0.0.1:53015
96430:M 03 May 2025 23:05:23.432 - Accepting cluster node connection from 127.0.0.1:53021
96430:M 03 May 2025 23:05:23.441 * configEpoch collision with node 81588ad0024e11177626cca2c8ee4fd836e1ed14 (). configEpoch set to 4
96430:M 03 May 2025 23:05:23.446 * configEpoch collision with node 81588ad0024e11177626cca2c8ee4fd836e1ed14 (). configEpoch set to 5
96430:M 03 May 2025 23:05:23.505 - Accepting cluster node connection from 127.0.0.1:53128
96430:M 03 May 2025 23:05:23.519 * configEpoch collision with node d647fe3c6249caeecf6b9af44adca3d1102dfa46 (). configEpoch set to 6
96430:M 03 May 2025 23:05:23.684 * configEpoch collision with node 850a0b709f6fd994b2265ebf4364abdc3c616c13 (). configEpoch set to 8
96430:M 03 May 2025 23:05:23.774 * configEpoch collision with node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca (). configEpoch set to 9
96430:M 03 May 2025 23:05:23.787 * Cluster state changed: ok
96430:M 03 May 2025 23:05:23.907 * configEpoch collision with node bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e (). configEpoch set to 11
96430:M 03 May 2025 23:05:24.173 * configEpoch collision with node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb (). configEpoch set to 12
96430:M 03 May 2025 23:05:24.183 * configEpoch collision with node 46671e5b4c343c9639452ff6da1989e7ac8280cd (). configEpoch set to 13
96430:M 03 May 2025 23:05:24.344 * configEpoch collision with node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca (). configEpoch set to 14
96430:M 03 May 2025 23:05:24.928 # Missing implement of connection type tls
96430:M 03 May 2025 23:05:25.297 * Node 46671e5b4c343c9639452ff6da1989e7ac8280cd () is no longer primary of shard d23d6577021315023b1dd173d641d1926f907df3; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.300 * Node 46671e5b4c343c9639452ff6da1989e7ac8280cd () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.306 * Node 46671e5b4c343c9639452ff6da1989e7ac8280cd () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.347 * Node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () is no longer primary of shard 2188c61d04f7f0a25193408f3d8746ab2f846352; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.353 * Node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.353 * Node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.353 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is no longer primary of shard a665c2ca38e396284bcca69c955504089488e0bb; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.353 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.353 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.353 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is no longer primary of shard 5f5ffebf28e888e88191b6a587c99a11e281ceba; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.353 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.353 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.355 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is no longer primary of shard 30120e5cb282a2877a7ad3d91cfcd1c147513111; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.355 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.355 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:25.365 * Node b9b46fb4ad2ec44f60cdb6c0ca604a7f1f256726 () is no longer primary of shard 609eb7b194545b6498d2677490de754944d2e8cb; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.365 * Node b9b46fb4ad2ec44f60cdb6c0ca604a7f1f256726 () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.365 * Node b9b46fb4ad2ec44f60cdb6c0ca604a7f1f256726 () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.365 * Node bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e () is no longer primary of shard bcaaa2ea0b6b303b1dc64e1fc492fde94bd35d92; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.365 * Node bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.365 * Node bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.373 * Node 850a0b709f6fd994b2265ebf4364abdc3c616c13 () is no longer primary of shard 8d0dba8e2dd945d869c1c0541d2e2246f711b44c; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.374 * Node 850a0b709f6fd994b2265ebf4364abdc3c616c13 () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.374 * Node 850a0b709f6fd994b2265ebf4364abdc3c616c13 () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.385 * Node 046e44a65cc052012ccd55765babd4aabb14ecc1 () is no longer primary of shard 70ab99f5bb9aae2f734265441e49f9496bbd0c0e; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.388 * Node 046e44a65cc052012ccd55765babd4aabb14ecc1 () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.394 * Node 046e44a65cc052012ccd55765babd4aabb14ecc1 () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.407 * Node 8e266e9d6e33071bd4ebd8616c154d0d3e009dec () is no longer primary of shard 26c548505ec1ecf0597013251764b1726b388b98; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.409 * Node 8e266e9d6e33071bd4ebd8616c154d0d3e009dec () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.409 * Node 8e266e9d6e33071bd4ebd8616c154d0d3e009dec () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96430:M 03 May 2025 23:05:25.411 - Accepted 127.0.0.1:54566
96430:M 03 May 2025 23:05:25.420 - Accepted 127.0.0.1:54570
96430:M 03 May 2025 23:05:25.423 * Node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb () is no longer primary of shard 448817fb803293ad3a7fe962bd3cda16961d7fc1; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.423 * Node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.423 * Node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.424 * Node 0c687ad12155a843b2eb8ca14588185b8bffc837 () is no longer primary of shard edb4e4a1f986a0925e7570d317642aa8e4c26bb6; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.424 * Node 0c687ad12155a843b2eb8ca14588185b8bffc837 () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.424 * Node 0c687ad12155a843b2eb8ca14588185b8bffc837 () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.426 - Accepted 127.0.0.1:54572
96430:M 03 May 2025 23:05:25.427 * Node 81588ad0024e11177626cca2c8ee4fd836e1ed14 () is no longer primary of shard ed53db1b4a03669a1cac0679827a0efe1a5c531d; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.427 * Node 81588ad0024e11177626cca2c8ee4fd836e1ed14 () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.427 * Node 81588ad0024e11177626cca2c8ee4fd836e1ed14 () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.427 * Replica 127.0.0.1:27153 asks for synchronization
96430:M 03 May 2025 23:05:25.427 * Full resync requested by replica 127.0.0.1:27153
96430:M 03 May 2025 23:05:25.427 * Replication backlog created, my new replication IDs are 'f532f217e100722dd68cde287890dad89fb19195' and '0000000000000000000000000000000000000000'
96430:M 03 May 2025 23:05:25.427 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
96430:M 03 May 2025 23:05:25.429 * Background RDB transfer started by pid 96858 to pipe through parent process
96858:C 03 May 2025 23:05:25.429 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
96430:M 03 May 2025 23:05:25.475 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
96430:M 03 May 2025 23:05:25.484 * Replica 127.0.0.1:27147 asks for synchronization
96430:M 03 May 2025 23:05:25.487 * Full resync requested by replica 127.0.0.1:27147
96430:M 03 May 2025 23:05:25.491 * Current BGSAVE has socket target. Waiting for next BGSAVE for SYNC
96430:M 03 May 2025 23:05:25.495 - Accepted 127.0.0.1:54644
96430:M 03 May 2025 23:05:25.498 * Replica 127.0.0.1:27150 asks for synchronization
96430:M 03 May 2025 23:05:25.504 * Full resync requested by replica 127.0.0.1:27150
96430:M 03 May 2025 23:05:25.504 * Current BGSAVE has socket target. Waiting for next BGSAVE for SYNC
96430:M 03 May 2025 23:05:25.509 * Node d647fe3c6249caeecf6b9af44adca3d1102dfa46 () is no longer primary of shard 8e6b5a893b6e53e9ed8274188595f8c8e267408d; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.511 * Node d647fe3c6249caeecf6b9af44adca3d1102dfa46 () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.516 * Node d647fe3c6249caeecf6b9af44adca3d1102dfa46 () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.516 - Accepted 127.0.0.1:54659
96430:M 03 May 2025 23:05:25.521 * Background RDB transfer terminated with success
96430:M 03 May 2025 23:05:25.522 * Streamed RDB transfer with replica 127.0.0.1:27153 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
96430:M 03 May 2025 23:05:25.524 * Synchronization with replica 127.0.0.1:27153 succeeded
96430:M 03 May 2025 23:05:25.527 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
96430:M 03 May 2025 23:05:25.530 * Background RDB transfer started by pid 96883 to pipe through parent process
96883:C 03 May 2025 23:05:25.530 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
96430:M 03 May 2025 23:05:25.532 * Node 071f788bd26ee028f2ea656a5a2139f79f12d6ad () is no longer primary of shard 7a87e0296504e5134f504882139bc2e3f76c4b89; removed all 0 slot(s) it used to own
96430:M 03 May 2025 23:05:25.537 * Node 071f788bd26ee028f2ea656a5a2139f79f12d6ad () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.537 * Node 071f788bd26ee028f2ea656a5a2139f79f12d6ad () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96430:M 03 May 2025 23:05:25.537 * Diskless rdb transfer, done reading from pipe, 2 replicas still up.
96430:M 03 May 2025 23:05:25.563 # DEBUG LOG: ========== I am primary 2 ==========
96430:M 03 May 2025 23:05:25.569 * Replica 127.0.0.1:27144 asks for synchronization
96430:M 03 May 2025 23:05:25.578 * Full resync requested by replica 127.0.0.1:27144
96430:M 03 May 2025 23:05:25.580 * Current BGSAVE has socket target. Waiting for next BGSAVE for SYNC
96430:M 03 May 2025 23:05:25.591 * Background RDB transfer terminated with success
96430:M 03 May 2025 23:05:25.594 * Streamed RDB transfer with replica 127.0.0.1:27147 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
96430:M 03 May 2025 23:05:25.598 * Synchronization with replica 127.0.0.1:27147 succeeded
96430:M 03 May 2025 23:05:25.604 * Streamed RDB transfer with replica 127.0.0.1:27150 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
96430:M 03 May 2025 23:05:25.608 * Synchronization with replica 127.0.0.1:27150 succeeded
96430:M 03 May 2025 23:05:25.610 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
96430:M 03 May 2025 23:05:25.621 * Background RDB transfer started by pid 96893 to pipe through parent process
96893:C 03 May 2025 23:05:25.621 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
96430:M 03 May 2025 23:05:25.628 * Replica 127.0.0.1:27141 asks for synchronization
96430:M 03 May 2025 23:05:25.636 * Full resync requested by replica 127.0.0.1:27141
96430:M 03 May 2025 23:05:25.641 * Current BGSAVE has socket target. Waiting for next BGSAVE for SYNC
96430:M 03 May 2025 23:05:25.641 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
96430:M 03 May 2025 23:05:25.654 * Background RDB transfer terminated with success
96430:M 03 May 2025 23:05:25.655 * Streamed RDB transfer with replica 127.0.0.1:27144 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
96430:M 03 May 2025 23:05:25.656 * Synchronization with replica 127.0.0.1:27144 succeeded
96430:M 03 May 2025 23:05:25.656 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
96430:M 03 May 2025 23:05:25.660 * Background RDB transfer started by pid 96907 to pipe through parent process
96907:C 03 May 2025 23:05:25.660 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
96430:M 03 May 2025 23:05:25.666 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
96430:M 03 May 2025 23:05:25.723 * Background RDB transfer terminated with success
96430:M 03 May 2025 23:05:25.729 * Streamed RDB transfer with replica 127.0.0.1:27141 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
96430:M 03 May 2025 23:05:25.732 * Synchronization with replica 127.0.0.1:27141 succeeded
### Starting test Cluster is up in tests/unit/cluster/slave-selection.tcl
### Starting test The first master has actually 5 slaves in tests/unit/cluster/slave-selection.tcl
### Starting test Slaves of #0 are instance #3, #6, #9, #12 and #15 as expected in tests/unit/cluster/slave-selection.tcl
### Starting test Instance #3, #6, #9, #12 and #15 synced with the master in tests/unit/cluster/slave-selection.tcl
### Starting test New Master down consecutively in tests/unit/cluster/slave-selection.tcl
96430:M 03 May 2025 23:05:37.260 * FAIL message received from b0460c495605a702515eee2bbc385790a6fbec4f () about 90fe983302002b82cb23590ee6d0f8941a6f292c ()
96430:M 03 May 2025 23:05:37.260 # Cluster state changed: fail
96430:M 03 May 2025 23:05:37.260 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
96430:M 03 May 2025 23:05:38.245 * Failover auth granted to 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () for epoch 18
96430:M 03 May 2025 23:05:38.299 * Cluster state changed: ok
96430:M 03 May 2025 23:05:38.356 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is now a replica of node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:38.370 * Node 46671e5b4c343c9639452ff6da1989e7ac8280cd () is now a replica of node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:38.370 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:38.370 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:38.571 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node 90fe983302002b82cb23590ee6d0f8941a6f292c () as not reachable.
96430:M 03 May 2025 23:05:41.677 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () as not reachable.
96430:M 03 May 2025 23:05:41.692 * Marking node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () as failing (quorum reached).
96430:M 03 May 2025 23:05:41.693 # Cluster state changed: fail
96430:M 03 May 2025 23:05:41.695 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
96430:M 03 May 2025 23:05:42.482 * Failover auth granted to 46671e5b4c343c9639452ff6da1989e7ac8280cd () for epoch 19
96430:M 03 May 2025 23:05:42.498 * Node 46671e5b4c343c9639452ff6da1989e7ac8280cd () reported node 90fe983302002b82cb23590ee6d0f8941a6f292c () as not reachable.
96430:M 03 May 2025 23:05:42.501 * Cluster state changed: ok
96430:M 03 May 2025 23:05:42.566 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node 46671e5b4c343c9639452ff6da1989e7ac8280cd () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:42.576 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is now a replica of node 46671e5b4c343c9639452ff6da1989e7ac8280cd () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:42.576 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node 46671e5b4c343c9639452ff6da1989e7ac8280cd () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:46.133 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node 46671e5b4c343c9639452ff6da1989e7ac8280cd () as not reachable.
96430:M 03 May 2025 23:05:46.133 * Marking node 46671e5b4c343c9639452ff6da1989e7ac8280cd () as failing (quorum reached).
96430:M 03 May 2025 23:05:46.133 # Cluster state changed: fail
96430:M 03 May 2025 23:05:46.133 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
96430:M 03 May 2025 23:05:46.770 * Failover auth granted to b07f064c60c460967f75f99083ccb3194b9c7693 () for epoch 20
96430:M 03 May 2025 23:05:46.848 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () reported node 46671e5b4c343c9639452ff6da1989e7ac8280cd () as not reachable.
96430:M 03 May 2025 23:05:46.851 * Cluster state changed: ok
96430:M 03 May 2025 23:05:46.899 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node b07f064c60c460967f75f99083ccb3194b9c7693 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:46.908 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node b07f064c60c460967f75f99083ccb3194b9c7693 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:50.425 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node b07f064c60c460967f75f99083ccb3194b9c7693 () as not reachable.
96430:M 03 May 2025 23:05:50.432 * Marking node b07f064c60c460967f75f99083ccb3194b9c7693 () as failing (quorum reached).
96430:M 03 May 2025 23:05:50.437 # Cluster state changed: fail
96430:M 03 May 2025 23:05:50.439 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
96430:M 03 May 2025 23:05:51.218 * Failover auth granted to b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () for epoch 21
96430:M 03 May 2025 23:05:51.299 * Cluster state changed: ok
96430:M 03 May 2025 23:05:51.372 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () reported node 46671e5b4c343c9639452ff6da1989e7ac8280cd () as not reachable.
96430:M 03 May 2025 23:05:51.374 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:51.400 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () reported node b07f064c60c460967f75f99083ccb3194b9c7693 () as not reachable.
96430:M 03 May 2025 23:05:51.575 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () reported node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () as not reachable.
96430:M 03 May 2025 23:05:54.898 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () as not reachable.
96430:M 03 May 2025 23:05:54.899 * Marking node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () as failing (quorum reached).
96430:M 03 May 2025 23:05:54.905 # Cluster state changed: fail
96430:M 03 May 2025 23:05:54.905 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
96430:M 03 May 2025 23:05:55.622 * Failover auth granted to fdccb5fdeea48c4647d42af59fa9a489b564cd74 () for epoch 22
96430:M 03 May 2025 23:05:55.684 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node 46671e5b4c343c9639452ff6da1989e7ac8280cd () as not reachable.
96430:M 03 May 2025 23:05:55.686 * Cluster state changed: ok
96430:M 03 May 2025 23:05:55.810 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () as not reachable.
96430:M 03 May 2025 23:05:55.940 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node 90fe983302002b82cb23590ee6d0f8941a6f292c () as not reachable.
### Starting test Check for memory leaks (pid 96528) in tests/unit/cluster/slave-selection.tcl
96430:M 03 May 2025 23:05:57.023 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () as not reachable.
96430:M 03 May 2025 23:05:57.269 - Node 90fe983302002b82cb23590ee6d0f8941a6f292c has old slots configuration, sending an UPDATE message about fdccb5fdeea48c4647d42af59fa9a489b564cd74
96430:M 03 May 2025 23:05:57.279 * A failover occurred in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8; node 90fe983302002b82cb23590ee6d0f8941a6f292c () failed over to node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () with a config epoch of 21
96430:M 03 May 2025 23:05:57.279 * Node 90fe983302002b82cb23590ee6d0f8941a6f292c () is now a replica of node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:05:57.280 * Clear FAIL state for node 90fe983302002b82cb23590ee6d0f8941a6f292c (): replica is reachable again.
96430:M 03 May 2025 23:05:57.347 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node b07f064c60c460967f75f99083ccb3194b9c7693 () as not reachable.
96430:M 03 May 2025 23:05:57.430 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node 90fe983302002b82cb23590ee6d0f8941a6f292c () is back online.
96430:M 03 May 2025 23:05:57.448 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
### Starting test Check for memory leaks (pid 96479) in tests/unit/cluster/slave-selection.tcl
96430:M 03 May 2025 23:05:57.548 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:57.648 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:57.749 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:57.850 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:57.939 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node 90fe983302002b82cb23590ee6d0f8941a6f292c () is back online.
96430:M 03 May 2025 23:05:57.950 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.051 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.152 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.253 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.353 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.455 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.556 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.657 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.758 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.859 - Connection with Node b0460c495605a702515eee2bbc385790a6fbec4f at 127.0.0.1:37157 failed: Connection refused
96430:M 03 May 2025 23:05:58.861 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:58.874 - Client closed connection id=3 addr=127.0.0.1:51420 laddr=127.0.0.1:27156 fd=14 name= age=37 idle=3 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|info user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=456 tot-net-out=14782 tot-cmds=14
96430:M 03 May 2025 23:05:58.959 - Connection with Node b0460c495605a702515eee2bbc385790a6fbec4f at 127.0.0.1:37157 failed: Connection refused
96430:M 03 May 2025 23:05:58.960 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:59.060 - Connection with Node b0460c495605a702515eee2bbc385790a6fbec4f at 127.0.0.1:37157 failed: Connection refused
96430:M 03 May 2025 23:05:59.061 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:59.163 - Connection with Node b0460c495605a702515eee2bbc385790a6fbec4f at 127.0.0.1:37157 failed: Connection refused
96430:M 03 May 2025 23:05:59.163 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:59.263 - Connection with Node b0460c495605a702515eee2bbc385790a6fbec4f at 127.0.0.1:37157 failed: Connection refused
96430:M 03 May 2025 23:05:59.264 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:59.365 - Connection with Node b0460c495605a702515eee2bbc385790a6fbec4f at 127.0.0.1:37157 failed: Connection refused
96430:M 03 May 2025 23:05:59.365 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:05:59.468 - Connection with Node b0460c495605a702515eee2bbc385790a6fbec4f at 127.0.0.1:37157 failed: Connection refused
96430:M 03 May 2025 23:05:59.468 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:M 03 May 2025 23:06:00.983 * FAIL message received from 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb () about 90fe983302002b82cb23590ee6d0f8941a6f292c ()
96430:M 03 May 2025 23:06:00.999 - Connection with Node b0460c495605a702515eee2bbc385790a6fbec4f at 127.0.0.1:37157 failed: Connection refused
96430:M 03 May 2025 23:06:01.003 - Connection with Node 90fe983302002b82cb23590ee6d0f8941a6f292c at 127.0.0.1:37158 failed: Connection refused
96430:signal-handler (1746281161) Received SIGTERM scheduling shutdown...
96430:M 03 May 2025 23:06:01.022 * Node 046e44a65cc052012ccd55765babd4aabb14ecc1 () is now a replica of node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96430:M 03 May 2025 23:06:01.084 * User requested shutdown...
96430:M 03 May 2025 23:06:01.085 * 5 of 5 replicas are in sync when shutting down.
96430:M 03 May 2025 23:06:01.085 * Removing the pid file.
96430:M 03 May 2025 23:06:01.085 * Saving the cluster configuration file before exiting.
96430:M 03 May 2025 23:06:01.091 * Removing the unix socket file.
96430:M 03 May 2025 23:06:01.091 # Valkey is now ready to exit, bye bye...
