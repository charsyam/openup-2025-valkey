### Starting server for test 
5241:M 03 May 2025 23:06:38.851 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
5241:M 03 May 2025 23:06:38.851 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
5241:M 03 May 2025 23:06:38.851 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=5241, just started
5241:M 03 May 2025 23:06:38.851 * Configuration loaded
5241:M 03 May 2025 23:06:38.851 * Increased maximum number of open files to 10032 (it was originally set to 256).
5241:M 03 May 2025 23:06:38.851 * monotonic clock: POSIX clock_gettime
5241:M 03 May 2025 23:06:38.852 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 28157
 |###|   .+###############+.   |###|    PID: 5241                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

5241:M 03 May 2025 23:06:38.852 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
5241:M 03 May 2025 23:06:38.852 * No cluster configuration found, I'm c9e5a0b46135e8396d80e0c862f705be6af85ef4
5241:M 03 May 2025 23:06:38.858 * Server initialized
5241:M 03 May 2025 23:06:38.858 * Ready to accept connections tcp
5241:M 03 May 2025 23:06:38.858 * Ready to accept connections unix
5241:M 03 May 2025 23:06:38.987 - Accepted 127.0.0.1:63163
5241:M 03 May 2025 23:06:38.987 - Client closed connection id=2 addr=127.0.0.1:63163 laddr=127.0.0.1:28157 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
5241:M 03 May 2025 23:06:38.996 - Accepted 127.0.0.1:63165
5241:M 03 May 2025 23:06:38.996 * Cluster meet 127.0.0.1:28156 (user request from 'id=3 addr=127.0.0.1:63165 laddr=127.0.0.1:28157 fd=14 name= user=default lib-name= lib-ver=').
5241:M 03 May 2025 23:06:38.996 * Cluster meet 127.0.0.1:28155 (user request from 'id=3 addr=127.0.0.1:63165 laddr=127.0.0.1:28157 fd=14 name= user=default lib-name= lib-ver=').
5241:M 03 May 2025 23:06:38.996 * Cluster meet 127.0.0.1:28154 (user request from 'id=3 addr=127.0.0.1:63165 laddr=127.0.0.1:28157 fd=14 name= user=default lib-name= lib-ver=').
5241:M 03 May 2025 23:06:38.996 * Cluster meet 127.0.0.1:28153 (user request from 'id=3 addr=127.0.0.1:63165 laddr=127.0.0.1:28157 fd=14 name= user=default lib-name= lib-ver=').
5241:M 03 May 2025 23:06:38.996 * Cluster meet 127.0.0.1:28152 (user request from 'id=3 addr=127.0.0.1:63165 laddr=127.0.0.1:28157 fd=14 name= user=default lib-name= lib-ver=').
5241:M 03 May 2025 23:06:38.996 * Cluster meet 127.0.0.1:28151 (user request from 'id=3 addr=127.0.0.1:63165 laddr=127.0.0.1:28157 fd=14 name= user=default lib-name= lib-ver=').
5241:M 03 May 2025 23:06:38.998 # Missing implement of connection type tls
5241:M 03 May 2025 23:06:39.083 - Accepting cluster node connection from 127.0.0.1:63252
5241:M 03 May 2025 23:06:39.083 * IP address for this node updated to 127.0.0.1
5241:M 03 May 2025 23:06:39.083 * Successfully completed handshake with 9e34aa65a57450b0b78b3ff60126f2dba15432b3 ()
5241:M 03 May 2025 23:06:39.088 - Accepting cluster node connection from 127.0.0.1:63253
5241:M 03 May 2025 23:06:39.088 * Successfully completed handshake with f8557e569b17a624461729f78af03982b6d35259 ()
5241:M 03 May 2025 23:06:39.088 * configEpoch collision with node f8557e569b17a624461729f78af03982b6d35259 (). configEpoch set to 1
5241:M 03 May 2025 23:06:39.100 - Accepting cluster node connection from 127.0.0.1:63264
5241:M 03 May 2025 23:06:39.100 * Successfully completed handshake with d67d7943c1deb3eee3c1900fd39405a367dbf29f ()
5241:M 03 May 2025 23:06:39.113 - Accepting cluster node connection from 127.0.0.1:63265
5241:M 03 May 2025 23:06:39.113 * Successfully completed handshake with 2cbd7ea25a13bbe4685d01b3dc9c208fc56aced2 ()
5241:M 03 May 2025 23:06:39.128 - Accepting cluster node connection from 127.0.0.1:63274
5241:M 03 May 2025 23:06:39.128 * Successfully completed handshake with 89bc7eaa899d3a8e42e4ea195766c9319462b3ee ()
5241:M 03 May 2025 23:06:39.133 - Accepting cluster node connection from 127.0.0.1:63275
5241:M 03 May 2025 23:06:39.133 * Successfully completed handshake with c6c765da8761077e56e716e56cf93c3d2d6f70ee ()
5241:M 03 May 2025 23:06:39.474 - Accepted 127.0.0.1:63658
5241:M 03 May 2025 23:06:39.474 * Node c6c765da8761077e56e716e56cf93c3d2d6f70ee () is no longer primary of shard 74bb32459afcc941d1efa0ad9cc919d5033c5b79; removed all 0 slot(s) it used to own
5241:M 03 May 2025 23:06:39.474 * Node c6c765da8761077e56e716e56cf93c3d2d6f70ee () is now part of shard 1b1f679f3abb9d71d1adb03e6490e990cced014d
5241:M 03 May 2025 23:06:39.474 * Node c6c765da8761077e56e716e56cf93c3d2d6f70ee () is now a replica of node c9e5a0b46135e8396d80e0c862f705be6af85ef4 () in shard 1b1f679f3abb9d71d1adb03e6490e990cced014d
5241:M 03 May 2025 23:06:39.474 - Accepted 127.0.0.1:63660
5241:M 03 May 2025 23:06:39.475 * Replica 127.0.0.1:28154 asks for synchronization
5241:M 03 May 2025 23:06:39.475 * Full resync requested by replica 127.0.0.1:28154
5241:M 03 May 2025 23:06:39.475 * Replication backlog created, my new replication IDs are 'a207c70e84630498b98851483e9b654c96aa8bdd' and '0000000000000000000000000000000000000000'
5241:M 03 May 2025 23:06:39.475 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
5241:M 03 May 2025 23:06:39.476 * Background RDB transfer started by pid 5315 to pipe through parent process
5241:M 03 May 2025 23:06:39.477 * Node f8557e569b17a624461729f78af03982b6d35259 () is no longer primary of shard 12a950cf070beb068f50ef5691397efce9fca139; removed all 0 slot(s) it used to own
5241:M 03 May 2025 23:06:39.477 * Node f8557e569b17a624461729f78af03982b6d35259 () is now part of shard 1b1f679f3abb9d71d1adb03e6490e990cced014d
5241:M 03 May 2025 23:06:39.477 * Node f8557e569b17a624461729f78af03982b6d35259 () is now a replica of node c9e5a0b46135e8396d80e0c862f705be6af85ef4 () in shard 1b1f679f3abb9d71d1adb03e6490e990cced014d
5241:M 03 May 2025 23:06:39.477 * Node 2cbd7ea25a13bbe4685d01b3dc9c208fc56aced2 () is no longer primary of shard c435f9a2982aa65f5dc900c7712cc7e0acb3b964; removed all 0 slot(s) it used to own
5241:M 03 May 2025 23:06:39.477 * Node 2cbd7ea25a13bbe4685d01b3dc9c208fc56aced2 () is now part of shard dbed2148a2a919b523dc119cd1bb807fb422a5e4
5241:M 03 May 2025 23:06:39.477 * Node 2cbd7ea25a13bbe4685d01b3dc9c208fc56aced2 () is now a replica of node 9e34aa65a57450b0b78b3ff60126f2dba15432b3 () in shard dbed2148a2a919b523dc119cd1bb807fb422a5e4
5315:C 03 May 2025 23:06:39.477 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
5241:M 03 May 2025 23:06:39.477 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
5241:M 03 May 2025 23:06:39.479 * Replica 127.0.0.1:28151 asks for synchronization
5241:M 03 May 2025 23:06:39.479 * Full resync requested by replica 127.0.0.1:28151
5241:M 03 May 2025 23:06:39.479 * Current BGSAVE has socket target. Waiting for next BGSAVE for SYNC
5241:M 03 May 2025 23:06:39.480 * Node d67d7943c1deb3eee3c1900fd39405a367dbf29f () is no longer primary of shard 88fcd9108de6997b5ab78e26df6881f3bfa26f59; removed all 0 slot(s) it used to own
5241:M 03 May 2025 23:06:39.480 * Node d67d7943c1deb3eee3c1900fd39405a367dbf29f () is now part of shard e83bbd260e839860b36f89307e08031b8523451b
5241:M 03 May 2025 23:06:39.480 * Node d67d7943c1deb3eee3c1900fd39405a367dbf29f () is now a replica of node 89bc7eaa899d3a8e42e4ea195766c9319462b3ee () in shard e83bbd260e839860b36f89307e08031b8523451b
5241:M 03 May 2025 23:06:39.480 # DEBUG LOG: ========== I am primary 0 ==========
5241:M 03 May 2025 23:06:39.565 * Background RDB transfer terminated with success
5241:M 03 May 2025 23:06:39.565 * Streamed RDB transfer with replica 127.0.0.1:28154 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
5241:M 03 May 2025 23:06:39.565 * Synchronization with replica 127.0.0.1:28154 succeeded
5241:M 03 May 2025 23:06:39.565 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
5241:M 03 May 2025 23:06:39.566 * Background RDB transfer started by pid 5324 to pipe through parent process
5324:C 03 May 2025 23:06:39.567 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
5241:M 03 May 2025 23:06:39.569 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
5241:M 03 May 2025 23:06:39.571 * Background RDB transfer terminated with success
5241:M 03 May 2025 23:06:39.571 * Streamed RDB transfer with replica 127.0.0.1:28151 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
5241:M 03 May 2025 23:06:39.571 * Synchronization with replica 127.0.0.1:28151 succeeded
5241:M 03 May 2025 23:06:40.873 * Cluster state changed: ok
### Starting test auto-failover-on-shutdown hands over primaryship to a fully sync'd replica - sigterm - shutdown-timeout: 10 in tests/unit/cluster/auto-failover-on-shutdown.tcl
5241:signal-handler (1746281209) Received SIGTERM scheduling shutdown...
5241:M 03 May 2025 23:06:49.283 * User requested shutdown...
5241:M 03 May 2025 23:06:49.283 * Waiting for replicas before shutting down.
5241:M 03 May 2025 23:06:52.410 * FAIL message received from 89bc7eaa899d3a8e42e4ea195766c9319462b3ee () about c6c765da8761077e56e716e56cf93c3d2d6f70ee ()
5241:M 03 May 2025 23:06:52.592 * Node 89bc7eaa899d3a8e42e4ea195766c9319462b3ee () reported node c6c765da8761077e56e716e56cf93c3d2d6f70ee () as not reachable.
5241:M 03 May 2025 23:06:52.612 * Node 9e34aa65a57450b0b78b3ff60126f2dba15432b3 () reported node c6c765da8761077e56e716e56cf93c3d2d6f70ee () as not reachable.
5241:M 03 May 2025 23:06:54.022 - DB 0: 1 keys (0 volatile) in 7 slots HT.
5241:M 03 May 2025 23:06:59.070 - DB 0: 1 keys (0 volatile) in 7 slots HT.
5241:M 03 May 2025 23:06:59.373 * Lagging replica 127.0.0.1:28154 reported offset 384 behind master, lag=11, state=online.
5241:M 03 May 2025 23:06:59.373 * 1 of 2 replicas are in sync when shutting down.
5241:M 03 May 2025 23:06:59.373 * Removing the pid file.
5241:M 03 May 2025 23:06:59.373 * Perform auto failover to replica f8557e569b17a624461729f78af03982b6d35259 on shutdown.
5241:M 03 May 2025 23:06:59.373 * Saving the cluster configuration file before exiting.
5241:M 03 May 2025 23:06:59.379 * Removing the unix socket file.
5241:M 03 May 2025 23:06:59.380 # Valkey is now ready to exit, bye bye...
### Starting test Unable to find a replica to perform an auto failover - sigterm in tests/unit/cluster/auto-failover-on-shutdown.tcl
