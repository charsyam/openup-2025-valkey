### Starting server for test 
96377:M 03 May 2025 23:05:21.280 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
96377:M 03 May 2025 23:05:21.288 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
96377:M 03 May 2025 23:05:21.307 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=96377, just started
96377:M 03 May 2025 23:05:21.315 * Configuration loaded
96377:M 03 May 2025 23:05:21.321 * Increased maximum number of open files to 10032 (it was originally set to 256).
96377:M 03 May 2025 23:05:21.331 * monotonic clock: POSIX clock_gettime
96377:M 03 May 2025 23:05:21.339 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 27155
 |###|   .+###############+.   |###|    PID: 96377                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

96377:M 03 May 2025 23:05:21.350 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
96377:M 03 May 2025 23:05:21.364 * No cluster configuration found, I'm 46671e5b4c343c9639452ff6da1989e7ac8280cd
96377:M 03 May 2025 23:05:21.392 * Server initialized
96377:M 03 May 2025 23:05:21.395 * Ready to accept connections tcp
96377:M 03 May 2025 23:05:21.398 * Ready to accept connections unix
96377:M 03 May 2025 23:05:21.554 - Accepted 127.0.0.1:51087
96377:M 03 May 2025 23:05:21.562 - Client closed connection id=2 addr=127.0.0.1:51087 laddr=127.0.0.1:27155 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
96377:M 03 May 2025 23:05:21.603 - Accepted 127.0.0.1:51131
96377:M 03 May 2025 23:05:22.916 - Accepting cluster node connection from 127.0.0.1:52163
96377:M 03 May 2025 23:05:22.921 * IP address for this node updated to 127.0.0.1
96377:M 03 May 2025 23:05:23.057 * Successfully completed handshake with 0c687ad12155a843b2eb8ca14588185b8bffc837 ()
96377:M 03 May 2025 23:05:23.065 * configEpoch collision with node b9b46fb4ad2ec44f60cdb6c0ca604a7f1f256726 (). configEpoch set to 2
96377:M 03 May 2025 23:05:23.084 - Accepting cluster node connection from 127.0.0.1:52394
96377:M 03 May 2025 23:05:23.104 * Successfully completed handshake with 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca ()
96377:M 03 May 2025 23:05:23.256 - Accepting cluster node connection from 127.0.0.1:52573
96377:M 03 May 2025 23:05:23.262 - Accepting cluster node connection from 127.0.0.1:52620
96377:M 03 May 2025 23:05:23.268 - Accepting cluster node connection from 127.0.0.1:52706
96377:M 03 May 2025 23:05:23.278 * configEpoch collision with node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb (). configEpoch set to 4
96377:M 03 May 2025 23:05:23.344 * Successfully completed handshake with bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e ()
96377:M 03 May 2025 23:05:23.404 * Successfully completed handshake with b07f064c60c460967f75f99083ccb3194b9c7693 ()
96377:M 03 May 2025 23:05:23.412 - Accepting cluster node connection from 127.0.0.1:52914
96377:M 03 May 2025 23:05:23.420 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
96377:M 03 May 2025 23:05:23.463 - Accepting cluster node connection from 127.0.0.1:53019
96377:M 03 May 2025 23:05:23.466 - Accepting cluster node connection from 127.0.0.1:53046
96377:M 03 May 2025 23:05:23.479 - Accepting cluster node connection from 127.0.0.1:53073
96377:M 03 May 2025 23:05:23.486 - Accepting cluster node connection from 127.0.0.1:53086
96377:M 03 May 2025 23:05:23.502 * configEpoch collision with node 850a0b709f6fd994b2265ebf4364abdc3c616c13 (). configEpoch set to 5
96377:M 03 May 2025 23:05:23.642 - Accepting cluster node connection from 127.0.0.1:53178
96377:M 03 May 2025 23:05:23.644 - Accepting cluster node connection from 127.0.0.1:53188
96377:M 03 May 2025 23:05:23.651 - Accepting cluster node connection from 127.0.0.1:53239
96377:M 03 May 2025 23:05:23.655 - Accepting cluster node connection from 127.0.0.1:53251
96377:M 03 May 2025 23:05:23.671 - Accepting cluster node connection from 127.0.0.1:53296
96377:M 03 May 2025 23:05:23.675 - Accepting cluster node connection from 127.0.0.1:53310
96377:M 03 May 2025 23:05:23.684 * configEpoch collision with node d647fe3c6249caeecf6b9af44adca3d1102dfa46 (). configEpoch set to 7
96377:M 03 May 2025 23:05:23.750 - Accepting cluster node connection from 127.0.0.1:53335
96377:M 03 May 2025 23:05:23.756 - Accepting cluster node connection from 127.0.0.1:53343
96377:M 03 May 2025 23:05:23.765 * configEpoch collision with node 81588ad0024e11177626cca2c8ee4fd836e1ed14 (). configEpoch set to 8
96377:M 03 May 2025 23:05:23.783 * Cluster state changed: ok
96377:M 03 May 2025 23:05:23.841 * configEpoch collision with node 850a0b709f6fd994b2265ebf4364abdc3c616c13 (). configEpoch set to 9
96377:M 03 May 2025 23:05:23.921 * configEpoch collision with node bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e (). configEpoch set to 11
96377:M 03 May 2025 23:05:24.102 * configEpoch collision with node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb (). configEpoch set to 12
96377:M 03 May 2025 23:05:25.125 # Missing implement of connection type tls
96377:S 03 May 2025 23:05:25.257 * Connecting to PRIMARY 127.0.0.1:27158
96377:S 03 May 2025 23:05:25.257 * PRIMARY <-> REPLICA sync started
96377:S 03 May 2025 23:05:25.287 * Non blocking connect for SYNC fired the event.
96377:S 03 May 2025 23:05:25.337 * Primary replied to PING, replication can continue...
96377:S 03 May 2025 23:05:25.344 * Partial resynchronization not possible (no cached primary)
96377:S 03 May 2025 23:05:25.347 * Node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () is no longer primary of shard 2188c61d04f7f0a25193408f3d8746ab2f846352; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.349 * Node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:25.349 * Node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:25.349 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is no longer primary of shard a665c2ca38e396284bcca69c955504089488e0bb; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.349 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:25.349 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:25.353 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is no longer primary of shard 5f5ffebf28e888e88191b6a587c99a11e281ceba; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.353 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:25.353 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:25.354 * Full resync from primary: 7d58ddc376db3b26eb97d51b67f28be16101cc7d:0
96377:S 03 May 2025 23:05:25.357 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is no longer primary of shard 30120e5cb282a2877a7ad3d91cfcd1c147513111; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.357 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now part of shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:25.357 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node 90fe983302002b82cb23590ee6d0f8941a6f292c () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:25.358 * PRIMARY <-> REPLICA sync: receiving streamed RDB from primary with EOF to disk
96377:S 03 May 2025 23:05:25.363 * PRIMARY <-> REPLICA sync: Flushing old data
96377:S 03 May 2025 23:05:25.363 * PRIMARY <-> REPLICA sync: Loading DB in memory
96377:S 03 May 2025 23:05:25.363 * Loading RDB produced by Valkey version 255.255.255
96377:S 03 May 2025 23:05:25.363 * RDB age 0 seconds
96377:S 03 May 2025 23:05:25.363 * RDB memory usage when created 3.01 Mb
96377:S 03 May 2025 23:05:25.363 * Done loading RDB, keys loaded: 0, keys expired: 0.
96377:S 03 May 2025 23:05:25.363 * PRIMARY <-> REPLICA sync: Finished with success
96377:S 03 May 2025 23:05:25.363 * Node b9b46fb4ad2ec44f60cdb6c0ca604a7f1f256726 () is no longer primary of shard 609eb7b194545b6498d2677490de754944d2e8cb; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.363 * Node b9b46fb4ad2ec44f60cdb6c0ca604a7f1f256726 () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.363 * Node b9b46fb4ad2ec44f60cdb6c0ca604a7f1f256726 () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.366 * Node bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e () is no longer primary of shard bcaaa2ea0b6b303b1dc64e1fc492fde94bd35d92; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.366 * Node bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.369 * Node bad1ce8ea8e5fe0a5d60190ac38361547ddadb8e () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.374 * Node 850a0b709f6fd994b2265ebf4364abdc3c616c13 () is no longer primary of shard 8d0dba8e2dd945d869c1c0541d2e2246f711b44c; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.374 * Node 850a0b709f6fd994b2265ebf4364abdc3c616c13 () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.374 * Node 850a0b709f6fd994b2265ebf4364abdc3c616c13 () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.385 * Node 046e44a65cc052012ccd55765babd4aabb14ecc1 () is no longer primary of shard 70ab99f5bb9aae2f734265441e49f9496bbd0c0e; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.387 * Node 046e44a65cc052012ccd55765babd4aabb14ecc1 () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.388 * Node 046e44a65cc052012ccd55765babd4aabb14ecc1 () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.407 * Node 8e266e9d6e33071bd4ebd8616c154d0d3e009dec () is no longer primary of shard 26c548505ec1ecf0597013251764b1726b388b98; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.409 * Node 8e266e9d6e33071bd4ebd8616c154d0d3e009dec () is now part of shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.409 * Node 8e266e9d6e33071bd4ebd8616c154d0d3e009dec () is now a replica of node b0460c495605a702515eee2bbc385790a6fbec4f () in shard 7b37de049781604aab4ac894d8d78f2fe3df2e69
96377:S 03 May 2025 23:05:25.419 * Node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb () is no longer primary of shard 448817fb803293ad3a7fe962bd3cda16961d7fc1; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.419 * Node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.419 * Node 5efe9ebd92f2876d4c3e37c7dc016ea9d86346eb () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.425 * Node 0c687ad12155a843b2eb8ca14588185b8bffc837 () is no longer primary of shard edb4e4a1f986a0925e7570d317642aa8e4c26bb6; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.426 * Node 0c687ad12155a843b2eb8ca14588185b8bffc837 () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.426 * Node 0c687ad12155a843b2eb8ca14588185b8bffc837 () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.427 * Node 81588ad0024e11177626cca2c8ee4fd836e1ed14 () is no longer primary of shard ed53db1b4a03669a1cac0679827a0efe1a5c531d; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.427 * Node 81588ad0024e11177626cca2c8ee4fd836e1ed14 () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.427 * Node 81588ad0024e11177626cca2c8ee4fd836e1ed14 () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.509 * Node d647fe3c6249caeecf6b9af44adca3d1102dfa46 () is no longer primary of shard 8e6b5a893b6e53e9ed8274188595f8c8e267408d; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.511 * Node d647fe3c6249caeecf6b9af44adca3d1102dfa46 () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.511 * Node d647fe3c6249caeecf6b9af44adca3d1102dfa46 () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.524 * Node 071f788bd26ee028f2ea656a5a2139f79f12d6ad () is no longer primary of shard 7a87e0296504e5134f504882139bc2e3f76c4b89; removed all 0 slot(s) it used to own
96377:S 03 May 2025 23:05:25.527 * Node 071f788bd26ee028f2ea656a5a2139f79f12d6ad () is now part of shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.529 * Node 071f788bd26ee028f2ea656a5a2139f79f12d6ad () is now a replica of node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () in shard 7e34ce3dbc7ec7fb79e76ec5878e3c1da816f8f1
96377:S 03 May 2025 23:05:25.570 # DEBUG LOG: ========== I am replica 3 ==========
### Starting test Cluster is up in tests/unit/cluster/slave-selection.tcl
### Starting test The first master has actually 5 slaves in tests/unit/cluster/slave-selection.tcl
### Starting test Slaves of #0 are instance #3, #6, #9, #12 and #15 as expected in tests/unit/cluster/slave-selection.tcl
### Starting test Instance #3, #6, #9, #12 and #15 synced with the master in tests/unit/cluster/slave-selection.tcl
### Starting test New Master down consecutively in tests/unit/cluster/slave-selection.tcl
96377:S 03 May 2025 23:05:37.104 * NODE 90fe983302002b82cb23590ee6d0f8941a6f292c () possibly failing.
96377:S 03 May 2025 23:05:37.259 * Node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () reported node 90fe983302002b82cb23590ee6d0f8941a6f292c () as not reachable.
96377:S 03 May 2025 23:05:37.260 * FAIL message received from b0460c495605a702515eee2bbc385790a6fbec4f () about 90fe983302002b82cb23590ee6d0f8941a6f292c ()
96377:S 03 May 2025 23:05:37.260 # Cluster state changed: fail
96377:S 03 May 2025 23:05:37.260 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
96377:S 03 May 2025 23:05:37.305 * Start of election delayed for 1820 milliseconds (rank #1, primary rank #0, offset 14).
96377:S 03 May 2025 23:05:37.407 * Currently unable to failover: Waiting the delay before I can start a new failover.
96377:S 03 May 2025 23:05:37.606 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node 90fe983302002b82cb23590ee6d0f8941a6f292c () as not reachable.
96377:S 03 May 2025 23:05:38.009 * Currently unable to failover: Waiting the delay before I can start a new failover.
96377:S 03 May 2025 23:05:38.299 * Configuration change detected. Reconfiguring myself as a replica of node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:M 03 May 2025 23:05:38.300 * Connection with primary lost.
96377:M 03 May 2025 23:05:38.302 * Caching the disconnected primary state.
96377:S 03 May 2025 23:05:38.305 * Connecting to PRIMARY 127.0.0.1:27152
96377:S 03 May 2025 23:05:38.309 * PRIMARY <-> REPLICA sync started
96377:S 03 May 2025 23:05:38.315 * Cluster state changed: ok
96377:S 03 May 2025 23:05:38.363 * Non blocking connect for SYNC fired the event.
96377:S 03 May 2025 23:05:38.367 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is now a replica of node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:38.370 * Primary replied to PING, replication can continue...
96377:S 03 May 2025 23:05:38.370 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:38.370 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:05:38.372 * Trying a partial resynchronization (request 7d58ddc376db3b26eb97d51b67f28be16101cc7d:15).
96377:S 03 May 2025 23:05:38.372 * Successful partial resynchronization with primary.
96377:S 03 May 2025 23:05:38.372 * Primary replication ID changed to 7fb7dac86b097a0c131ecb94802c8a538e89786c
96377:S 03 May 2025 23:05:38.372 * PRIMARY <-> REPLICA sync: Primary accepted a Partial Resynchronization.
96377:S 03 May 2025 23:05:41.641 * NODE 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () possibly failing.
96377:S 03 May 2025 23:05:41.677 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () as not reachable.
96377:S 03 May 2025 23:05:41.696 * FAIL message received from 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () about 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca ()
96377:S 03 May 2025 23:05:41.696 # Cluster state changed: fail
96377:S 03 May 2025 23:05:41.696 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
96377:S 03 May 2025 23:05:41.742 * Start of election delayed for 638 milliseconds (rank #0, primary rank #0, offset 14).
96377:S 03 May 2025 23:05:41.843 * Currently unable to failover: Waiting the delay before I can start a new failover.
96377:S 03 May 2025 23:05:42.046 * Currently unable to failover: Waiting the delay before I can start a new failover.
96377:S 03 May 2025 23:05:42.352 * Node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () reported node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () as not reachable.
96377:S 03 May 2025 23:05:42.452 * Starting a failover election for epoch 19, node config epoch is 18
96377:S 03 May 2025 23:05:42.489 * Currently unable to failover: Waiting for votes, but majority still not reached.
96377:S 03 May 2025 23:05:42.489 * Needed quorum: 2. Number of votes received so far: 1
96377:S 03 May 2025 23:05:42.491 * Failover election won: I'm the new primary.
96377:S 03 May 2025 23:05:42.491 * configEpoch set to 19 after successful failover
96377:S 03 May 2025 23:05:42.491 * Setting myself to primary in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8 after failover; my old primary is 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca ()
96377:M 03 May 2025 23:05:42.491 * Connection with primary lost.
96377:M 03 May 2025 23:05:42.491 * Caching the disconnected primary state.
96377:M 03 May 2025 23:05:42.491 * Discarding previously cached primary state.
96377:M 03 May 2025 23:05:42.491 * Setting secondary replication ID to 7fb7dac86b097a0c131ecb94802c8a538e89786c, valid up to offset: 15. New replication ID is 0113593cb42adf4990c7f792c83eed6462d4fb09
96377:M 03 May 2025 23:05:42.491 * Cluster state changed: ok
96377:M 03 May 2025 23:05:42.498 - Accepted 127.0.0.1:57163
96377:M 03 May 2025 23:05:42.514 - Accepted 127.0.0.1:57165
96377:M 03 May 2025 23:05:42.515 - Accepted 127.0.0.1:57166
96377:M 03 May 2025 23:05:42.566 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node 46671e5b4c343c9639452ff6da1989e7ac8280cd () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:M 03 May 2025 23:05:42.577 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () is now a replica of node 46671e5b4c343c9639452ff6da1989e7ac8280cd () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:M 03 May 2025 23:05:42.577 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node 46671e5b4c343c9639452ff6da1989e7ac8280cd () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:M 03 May 2025 23:05:42.579 * Replica 127.0.0.1:27143 asks for synchronization
96377:M 03 May 2025 23:05:42.579 * Partial resynchronization request from 127.0.0.1:27143 accepted. Sending 0 bytes of backlog starting from offset 15.
96377:M 03 May 2025 23:05:42.581 * Replica 127.0.0.1:27146 asks for synchronization
96377:M 03 May 2025 23:05:42.582 * Partial resynchronization request from 127.0.0.1:27146 accepted. Sending 0 bytes of backlog starting from offset 15.
96377:M 03 May 2025 23:05:42.584 * Replica 127.0.0.1:27149 asks for synchronization
96377:M 03 May 2025 23:05:42.584 * Partial resynchronization request from 127.0.0.1:27149 accepted. Sending 0 bytes of backlog starting from offset 15.
### Starting test Check for memory leaks (pid 96528) in tests/unit/cluster/slave-selection.tcl
### Starting test Check for memory leaks (pid 96479) in tests/unit/cluster/slave-selection.tcl
### Starting test Check for memory leaks (pid 96430) in tests/unit/cluster/slave-selection.tcl
96377:signal-handler (1746281162) Received SIGTERM scheduling shutdown...
96377:M 03 May 2025 23:06:02.264 * User requested shutdown...
96377:M 03 May 2025 23:06:02.267 * Waiting for replicas before shutting down.
96377:M 03 May 2025 23:06:02.271 - Accepting cluster node connection from 127.0.0.1:57443
96377:M 03 May 2025 23:06:02.277 - Accepting cluster node connection from 127.0.0.1:57444
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57448
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57450
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57451
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57455
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57457
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57458
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57459
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57460
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57467
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57471
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57475
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57480
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:57481
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:58424
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:58425
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:58426
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:58429
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:58430
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:58444
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:58445
96377:M 03 May 2025 23:06:02.281 - Accepting cluster node connection from 127.0.0.1:58451
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:58452
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:58472
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:58476
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:58477
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:58492
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:58493
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:59912
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:59913
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:59914
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:59915
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:59916
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:59927
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:59933
96377:M 03 May 2025 23:06:02.284 - Accepting cluster node connection from 127.0.0.1:59956
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:59957
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:59960
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:59965
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:59970
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:59971
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:59977
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61239
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61240
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61241
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61243
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61244
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61245
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61272
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61275
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61276
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61277
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61278
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61279
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:61281
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62273
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62276
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62277
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62278
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62279
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62280
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62311
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62312
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62314
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62315
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62316
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62317
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:62318
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63664
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63671
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63674
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63681
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63689
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63700
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63721
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63725
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63728
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63740
96377:M 03 May 2025 23:06:02.287 - Accepting cluster node connection from 127.0.0.1:63744
96377:M 03 May 2025 23:06:02.287 - Node 90fe983302002b82cb23590ee6d0f8941a6f292c has old slots configuration, sending an UPDATE message about 46671e5b4c343c9639452ff6da1989e7ac8280cd
96377:M 03 May 2025 23:06:02.287 * A failover occurred in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8; node 90fe983302002b82cb23590ee6d0f8941a6f292c () failed over to node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () with a config epoch of 21
96377:M 03 May 2025 23:06:02.287 * Node 90fe983302002b82cb23590ee6d0f8941a6f292c () is now a replica of node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:M 03 May 2025 23:06:02.287 - Accepted 127.0.0.1:62347
96377:M 03 May 2025 23:06:02.287 - Client closed connection id=3 addr=127.0.0.1:51131 laddr=127.0.0.1:27155 fd=14 name= age=41 idle=20 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=8192 rbp=0 obl=0 oll=0 omem=0 tot-mem=25600 events=r cmd=info user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=2580 tot-net-out=992065 tot-cmds=168
96377:M 03 May 2025 23:06:02.287 - Reading from client: Connection reset by peer
96377:M 03 May 2025 23:06:02.287 * Connection with replica client id #8 lost.
96377:M 03 May 2025 23:06:02.288 - Reading from client: Connection reset by peer
96377:M 03 May 2025 23:06:02.288 * Connection with replica client id #9 lost.
96377:M 03 May 2025 23:06:02.288 - Reading from client: Connection reset by peer
96377:M 03 May 2025 23:06:02.288 * Connection with replica client id #7 lost.
96377:M 03 May 2025 23:06:02.288 * Ignore stale message from b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8; gossip config epoch: 19, current config epoch: 21
96377:M 03 May 2025 23:06:02.288 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node 46671e5b4c343c9639452ff6da1989e7ac8280cd () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:M 03 May 2025 23:06:02.288 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () is now a replica of node b07f064c60c460967f75f99083ccb3194b9c7693 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:M 03 May 2025 23:06:02.288 # Failover auth denied to b07f064c60c460967f75f99083ccb3194b9c7693 (): reqEpoch (20) < curEpoch(22)
96377:M 03 May 2025 23:06:02.288 * Configuration change detected. Reconfiguring myself as a replica of node b07f064c60c460967f75f99083ccb3194b9c7693 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:06:02.288 * Before turning into a replica, using my own primary parameters to synthesize a cached primary: I may be able to synchronize with the new primary with just a partial transfer.
96377:S 03 May 2025 23:06:02.288 * Connecting to PRIMARY 127.0.0.1:27146
96377:S 03 May 2025 23:06:02.288 * PRIMARY <-> REPLICA sync started
96377:S 03 May 2025 23:06:02.288 * Node b07f064c60c460967f75f99083ccb3194b9c7693 () reported node 90fe983302002b82cb23590ee6d0f8941a6f292c () as not reachable.
96377:S 03 May 2025 23:06:02.288 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node b07f064c60c460967f75f99083ccb3194b9c7693 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:06:02.288 * FAIL message received from b0460c495605a702515eee2bbc385790a6fbec4f () about b07f064c60c460967f75f99083ccb3194b9c7693 ()
96377:S 03 May 2025 23:06:02.288 * Configuration change detected. Reconfiguring myself as a replica of node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:06:02.288 * Connecting to PRIMARY 127.0.0.1:27149
96377:S 03 May 2025 23:06:02.288 * PRIMARY <-> REPLICA sync started
96377:S 03 May 2025 23:06:02.288 * Node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () reported node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () as not reachable.
96377:S 03 May 2025 23:06:02.288 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () is now a replica of node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:06:02.288 * Node b0460c495605a702515eee2bbc385790a6fbec4f () reported node b07f064c60c460967f75f99083ccb3194b9c7693 () as not reachable.
96377:S 03 May 2025 23:06:02.288 * Node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () reported node b07f064c60c460967f75f99083ccb3194b9c7693 () as not reachable.
96377:S 03 May 2025 23:06:02.288 * FAIL message received from 0c687ad12155a843b2eb8ca14588185b8bffc837 () about b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 ()
96377:S 03 May 2025 23:06:02.288 * Configuration change detected. Reconfiguring myself as a replica of node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:06:02.288 * Connecting to PRIMARY 127.0.0.1:27143
96377:S 03 May 2025 23:06:02.288 * PRIMARY <-> REPLICA sync started
96377:S 03 May 2025 23:06:02.288 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node 42c7847e7a18321cb1983bca0f6288e8e5f0a2ca () as not reachable.
96377:S 03 May 2025 23:06:02.288 * Node 13a4d5b2dd0fe1636912ced49ca4e51bd44c4fa2 () reported node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () as not reachable.
96377:S 03 May 2025 23:06:02.288 - Client closed connection id=10 addr=127.0.0.1:62347 laddr=127.0.0.1:27155 fd=15 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=NULL user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=0 tot-net-out=0 tot-cmds=0
96377:S 03 May 2025 23:06:02.294 * Non blocking connect for SYNC fired the event.
96377:S 03 May 2025 23:06:02.294 * Node 046e44a65cc052012ccd55765babd4aabb14ecc1 () is now a replica of node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () in shard ce68b6e8cae6a92e5c5c44660f20acbe299591a8
96377:S 03 May 2025 23:06:02.294 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node b17ef56c324fd943a2e1e7ac4de1ae88e6e2d2a3 () as not reachable.
96377:S 03 May 2025 23:06:02.294 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node b07f064c60c460967f75f99083ccb3194b9c7693 () as not reachable.
96377:S 03 May 2025 23:06:02.294 * Node fdccb5fdeea48c4647d42af59fa9a489b564cd74 () reported node b0460c495605a702515eee2bbc385790a6fbec4f () as not reachable.
96377:S 03 May 2025 23:06:02.295 * Primary replied to PING, replication can continue...
96377:S 03 May 2025 23:06:02.295 * Trying a partial resynchronization (request 0113593cb42adf4990c7f792c83eed6462d4fb09:52).
96377:S 03 May 2025 23:06:02.296 * Full resync from primary: d58996b7e7b5d8510f805202c959696ec73dee74:14
96377:S 03 May 2025 23:06:02.299 * PRIMARY <-> REPLICA sync: receiving streamed RDB from primary with EOF to disk
96377:S 03 May 2025 23:06:02.302 * Discarding previously cached primary state.
96377:S 03 May 2025 23:06:02.302 * PRIMARY <-> REPLICA sync: Flushing old data
96377:S 03 May 2025 23:06:02.302 * PRIMARY <-> REPLICA sync: Loading DB in memory
96377:S 03 May 2025 23:06:02.302 * Loading RDB produced by Valkey version 255.255.255
96377:S 03 May 2025 23:06:02.302 * RDB age 0 seconds
96377:S 03 May 2025 23:06:02.302 * RDB memory usage when created 3.07 Mb
96377:S 03 May 2025 23:06:02.302 * Done loading RDB, keys loaded: 0, keys expired: 0.
96377:S 03 May 2025 23:06:02.302 * PRIMARY <-> REPLICA sync: Finished with success
96377:S 03 May 2025 23:06:02.371 * Removing the pid file.
96377:S 03 May 2025 23:06:02.372 * Saving the cluster configuration file before exiting.
96377:S 03 May 2025 23:06:02.397 * Removing the unix socket file.
96377:S 03 May 2025 23:06:02.400 # Valkey is now ready to exit, bye bye...
