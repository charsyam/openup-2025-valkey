### Starting server for test 
89516:M 03 May 2025 23:04:27.720 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
89516:M 03 May 2025 23:04:27.720 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
89516:M 03 May 2025 23:04:27.720 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=89516, just started
89516:M 03 May 2025 23:04:27.720 * Configuration loaded
89516:M 03 May 2025 23:04:27.720 * Increased maximum number of open files to 10032 (it was originally set to 256).
89516:M 03 May 2025 23:04:27.720 * monotonic clock: POSIX clock_gettime
89516:M 03 May 2025 23:04:27.721 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 25635
 |###|   .+###############+.   |###|    PID: 89516                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

89516:M 03 May 2025 23:04:27.721 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
89516:M 03 May 2025 23:04:27.721 * No cluster configuration found, I'm 830ac93a68bd546bc68f0d28099d68dec5e610e3
89516:M 03 May 2025 23:04:27.727 * Server initialized
89516:M 03 May 2025 23:04:27.727 * Ready to accept connections tcp
89516:M 03 May 2025 23:04:27.727 * Ready to accept connections unix
89516:M 03 May 2025 23:04:27.851 - Accepted 127.0.0.1:60340
89516:M 03 May 2025 23:04:27.852 - Client closed connection id=2 addr=127.0.0.1:60340 laddr=127.0.0.1:25635 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
89516:M 03 May 2025 23:04:27.864 - Accepted 127.0.0.1:60341
89516:M 03 May 2025 23:04:28.256 - Accepting cluster node connection from 127.0.0.1:60353
89516:M 03 May 2025 23:04:28.256 * IP address for this node updated to 127.0.0.1
89516:M 03 May 2025 23:04:28.368 - Accepting cluster node connection from 127.0.0.1:60372
89516:M 03 May 2025 23:04:28.420 - Accepting cluster node connection from 127.0.0.1:60385
89516:M 03 May 2025 23:04:28.463 - Accepting cluster node connection from 127.0.0.1:60405
89516:M 03 May 2025 23:04:28.467 - Accepting cluster node connection from 127.0.0.1:60412
89516:M 03 May 2025 23:04:28.496 * Successfully completed handshake with 298cbb5912fa1c49173b389864ea1d9e8949d312 ()
89516:M 03 May 2025 23:04:28.545 - Accepting cluster node connection from 127.0.0.1:60416
89516:M 03 May 2025 23:04:28.548 - Accepting cluster node connection from 127.0.0.1:60420
89516:M 03 May 2025 23:04:28.556 - Accepting cluster node connection from 127.0.0.1:60424
89516:M 03 May 2025 23:04:28.562 - Accepting cluster node connection from 127.0.0.1:60428
89516:M 03 May 2025 23:04:28.592 * Successfully completed handshake with c9c069e00f372ad4e0c059a17b2fe3dd61352384 ()
89516:M 03 May 2025 23:04:28.594 - Handshake: we already know node e8f7d0ef9915c7d538829f6e3533c532bafa8a39 (), updating the address if needed.
89516:M 03 May 2025 23:04:28.633 - Accepting cluster node connection from 127.0.0.1:60445
89516:M 03 May 2025 23:04:28.701 * configEpoch collision with node e8f7d0ef9915c7d538829f6e3533c532bafa8a39 (). configEpoch set to 7
89516:M 03 May 2025 23:04:28.701 - Accepting cluster node connection from 127.0.0.1:60455
89516:M 03 May 2025 23:04:28.736 - Accepting cluster node connection from 127.0.0.1:60457
89516:M 03 May 2025 23:04:28.828 - Handshake: we already know node b5d2cb99493e03b95f5b4ceef666b6c146b8483f (), updating the address if needed.
89516:M 03 May 2025 23:04:28.946 # Missing implement of connection type tls
89516:M 03 May 2025 23:04:28.946 - Accepting cluster node connection from 127.0.0.1:60467
89516:M 03 May 2025 23:04:28.946 - Accepting cluster node connection from 127.0.0.1:60468
89516:M 03 May 2025 23:04:28.972 * Node e8f7d0ef9915c7d538829f6e3533c532bafa8a39 () is no longer primary of shard 9eb746c79cb1fc7bdec65de386ac6a3de8061dbb; removed all 0 slot(s) it used to own
89516:M 03 May 2025 23:04:28.972 * Node e8f7d0ef9915c7d538829f6e3533c532bafa8a39 () is now part of shard ce1ce2d40fc11540b4d4fbf433a95aba39ce96d0
89516:M 03 May 2025 23:04:28.972 * Node e8f7d0ef9915c7d538829f6e3533c532bafa8a39 () is now a replica of node d4a541da210418dce028e0274341a55c129fc825 () in shard ce1ce2d40fc11540b4d4fbf433a95aba39ce96d0
89516:M 03 May 2025 23:04:28.974 * Node c9c069e00f372ad4e0c059a17b2fe3dd61352384 () is no longer primary of shard 49d1c37e6da3c41dc6095f8ed615dffa0215d0b5; removed all 0 slot(s) it used to own
89516:M 03 May 2025 23:04:28.974 * Node c9c069e00f372ad4e0c059a17b2fe3dd61352384 () is now part of shard e1de41ffd5b22c7cef240a4331f5b9c2bd1ec141
89516:M 03 May 2025 23:04:28.974 * Node c9c069e00f372ad4e0c059a17b2fe3dd61352384 () is now a replica of node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 () in shard e1de41ffd5b22c7cef240a4331f5b9c2bd1ec141
89516:M 03 May 2025 23:04:28.975 - Accepted 127.0.0.1:60473
89516:M 03 May 2025 23:04:28.976 * Node b5d2cb99493e03b95f5b4ceef666b6c146b8483f () is no longer primary of shard 18e491ac0ebbc1c9eda07c64fb7b5e3da97db16f; removed all 0 slot(s) it used to own
89516:M 03 May 2025 23:04:28.978 * Node b5d2cb99493e03b95f5b4ceef666b6c146b8483f () is now part of shard fb98a0ec1aacfb366246894eefaed2af2f7c4c4e
89516:M 03 May 2025 23:04:28.978 * Node b5d2cb99493e03b95f5b4ceef666b6c146b8483f () is now a replica of node 830ac93a68bd546bc68f0d28099d68dec5e610e3 () in shard fb98a0ec1aacfb366246894eefaed2af2f7c4c4e
89516:M 03 May 2025 23:04:28.980 * Replica 127.0.0.1:25630 asks for synchronization
89516:M 03 May 2025 23:04:28.980 * Full resync requested by replica 127.0.0.1:25630
89516:M 03 May 2025 23:04:28.980 * Replication backlog created, my new replication IDs are '58266fcf9ced64e121f140e2fd887fbb804d246a' and '0000000000000000000000000000000000000000'
89516:M 03 May 2025 23:04:28.980 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
89516:M 03 May 2025 23:04:28.982 * Background RDB transfer started by pid 89744 to pipe through parent process
89516:M 03 May 2025 23:04:28.982 * Node 49a6b2e00b53bcbb34b88b4d5b256badd9c9bf73 () is no longer primary of shard 52aceec9bf4978473ecde4c43e0799720fa9483c; removed all 0 slot(s) it used to own
89516:M 03 May 2025 23:04:28.985 * Node 49a6b2e00b53bcbb34b88b4d5b256badd9c9bf73 () is now part of shard d60eefbdbbd13d383fe3ab08148a31ced81848f0
89516:M 03 May 2025 23:04:28.985 * Node 49a6b2e00b53bcbb34b88b4d5b256badd9c9bf73 () is now a replica of node 117e239bcf937f1a7fd42246b67e12a4580dbdf1 () in shard d60eefbdbbd13d383fe3ab08148a31ced81848f0
89744:C 03 May 2025 23:04:28.982 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
89516:M 03 May 2025 23:04:28.987 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
89516:M 03 May 2025 23:04:28.990 * Node 3a80752b0eb90f9593f1ca7c29a1cc73b38435b7 () is no longer primary of shard 34b9589abeb4712483c0fff534f6c42c6e0692e1; removed all 0 slot(s) it used to own
89516:M 03 May 2025 23:04:28.995 * Node 3a80752b0eb90f9593f1ca7c29a1cc73b38435b7 () is now part of shard 13401c2fb3be710e34a5d8b768c60923088230ef
89516:M 03 May 2025 23:04:28.998 * Node 3a80752b0eb90f9593f1ca7c29a1cc73b38435b7 () is now a replica of node 298cbb5912fa1c49173b389864ea1d9e8949d312 () in shard 13401c2fb3be710e34a5d8b768c60923088230ef
89516:M 03 May 2025 23:04:28.999 * Background RDB transfer terminated with success
89516:M 03 May 2025 23:04:28.999 * Streamed RDB transfer with replica 127.0.0.1:25630 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
89516:M 03 May 2025 23:04:28.999 * Synchronization with replica 127.0.0.1:25630 succeeded
89516:M 03 May 2025 23:04:29.000 # DEBUG LOG: ========== I am primary 2 ==========
89516:M 03 May 2025 23:04:29.759 * Cluster state changed: ok
### Starting test Cluster is up in tests/unit/cluster/failover.tcl
### Starting test Cluster is writable in tests/unit/cluster/failover.tcl
89516:M 03 May 2025 23:04:38.560 - Accepted 127.0.0.1:62583
89516:M 03 May 2025 23:04:38.589 - Client closed connection id=7 addr=127.0.0.1:62583 laddr=127.0.0.1:25635 fd=34 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=get user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=1914 tot-net-out=838 tot-cmds=48
### Starting test Instance #5 is a slave in tests/unit/cluster/failover.tcl
### Starting test Instance #5 synced with the master in tests/unit/cluster/failover.tcl
### Starting test Killing one master node in tests/unit/cluster/failover.tcl
### Starting test Wait for failover in tests/unit/cluster/failover.tcl
89516:M 03 May 2025 23:04:41.835 * Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 () reported node d4a541da210418dce028e0274341a55c129fc825 () as not reachable.
89516:M 03 May 2025 23:04:41.836 * FAIL message received from b5d2cb99493e03b95f5b4ceef666b6c146b8483f () about d4a541da210418dce028e0274341a55c129fc825 ()
89516:M 03 May 2025 23:04:41.836 # Cluster state changed: fail
89516:M 03 May 2025 23:04:41.836 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
89516:M 03 May 2025 23:04:41.905 * Node 117e239bcf937f1a7fd42246b67e12a4580dbdf1 () reported node d4a541da210418dce028e0274341a55c129fc825 () as not reachable.
89516:M 03 May 2025 23:04:41.956 * Node 298cbb5912fa1c49173b389864ea1d9e8949d312 () reported node d4a541da210418dce028e0274341a55c129fc825 () as not reachable.
89516:M 03 May 2025 23:04:42.829 * Failover auth granted to e8f7d0ef9915c7d538829f6e3533c532bafa8a39 () for epoch 10
### Starting test Cluster should eventually be up again in tests/unit/cluster/failover.tcl
89516:M 03 May 2025 23:04:42.889 * Cluster state changed: ok
89516:M 03 May 2025 23:04:42.981 - DB 0: 24 keys (0 volatile) in 168 slots HT.
### Starting test Cluster is writable in tests/unit/cluster/failover.tcl
89516:M 03 May 2025 23:04:42.991 - Accepted 127.0.0.1:63962
89516:M 03 May 2025 23:04:43.020 - Client closed connection id=8 addr=127.0.0.1:63962 laddr=127.0.0.1:25635 fd=34 name= age=1 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=get user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=1914 tot-net-out=838 tot-cmds=48
### Starting test Instance #5 is now a master in tests/unit/cluster/failover.tcl
### Starting test Restarting the previously killed master node in tests/unit/cluster/failover.tcl
### Starting test Instance #0 gets converted into a slave in tests/unit/cluster/failover.tcl
89516:M 03 May 2025 23:04:43.027 - Node d4a541da210418dce028e0274341a55c129fc825 has old slots configuration, sending an UPDATE message about e8f7d0ef9915c7d538829f6e3533c532bafa8a39
89516:M 03 May 2025 23:04:43.032 * Clear FAIL state for node d4a541da210418dce028e0274341a55c129fc825 (): primary without slots is reachable again.
89516:M 03 May 2025 23:04:43.032 - Node d4a541da210418dce028e0274341a55c129fc825 has old slots configuration, sending an UPDATE message about e8f7d0ef9915c7d538829f6e3533c532bafa8a39
89516:M 03 May 2025 23:04:43.032 * A failover occurred in shard ce1ce2d40fc11540b4d4fbf433a95aba39ce96d0; node d4a541da210418dce028e0274341a55c129fc825 () failed over to node e8f7d0ef9915c7d538829f6e3533c532bafa8a39 () with a config epoch of 10
89516:M 03 May 2025 23:04:43.032 * Node d4a541da210418dce028e0274341a55c129fc825 () is now a replica of node e8f7d0ef9915c7d538829f6e3533c532bafa8a39 () in shard ce1ce2d40fc11540b4d4fbf433a95aba39ce96d0
### Starting test Check for memory leaks (pid 89538) in tests/unit/cluster/failover.tcl
89516:M 03 May 2025 23:04:43.083 * Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 () reported node d4a541da210418dce028e0274341a55c129fc825 () is back online.
89516:M 03 May 2025 23:04:43.084 * Node 117e239bcf937f1a7fd42246b67e12a4580dbdf1 () reported node d4a541da210418dce028e0274341a55c129fc825 () is back online.
89516:M 03 May 2025 23:04:43.084 * Node 298cbb5912fa1c49173b389864ea1d9e8949d312 () reported node d4a541da210418dce028e0274341a55c129fc825 () is back online.
89516:M 03 May 2025 23:04:44.394 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
### Starting test Check for memory leaks (pid 89527) in tests/unit/cluster/failover.tcl
89516:M 03 May 2025 23:04:44.495 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:44.596 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:44.696 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:44.797 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:44.898 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:44.999 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.100 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.201 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.302 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.403 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.504 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.605 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.706 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.806 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:45.907 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:46.007 - Connection with Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 at 127.0.0.1:35636 failed: Connection refused
89516:M 03 May 2025 23:04:46.007 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:46.018 - Client closed connection id=3 addr=127.0.0.1:60341 laddr=127.0.0.1:25635 fd=14 name= age=19 idle=3 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|slots user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=403 tot-net-out=11409 tot-cmds=12
89516:M 03 May 2025 23:04:46.108 - Connection with Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 at 127.0.0.1:35636 failed: Connection refused
89516:M 03 May 2025 23:04:46.108 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:46.211 - Connection with Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 at 127.0.0.1:35636 failed: Connection refused
89516:M 03 May 2025 23:04:46.211 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:46.313 - Connection with Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 at 127.0.0.1:35636 failed: Connection refused
89516:M 03 May 2025 23:04:46.313 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:46.414 - Connection with Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 at 127.0.0.1:35636 failed: Connection refused
89516:M 03 May 2025 23:04:46.414 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:46.515 - Connection with Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 at 127.0.0.1:35636 failed: Connection refused
89516:M 03 May 2025 23:04:46.515 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:M 03 May 2025 23:04:47.270 - Connection with Node b783e43cd90a371c2a8bfb9381f7136b60cec8f3 at 127.0.0.1:35636 failed: Connection refused
89516:M 03 May 2025 23:04:47.270 - Connection with Node d4a541da210418dce028e0274341a55c129fc825 at 127.0.0.1:35637 failed: Connection refused
89516:signal-handler (1746281087) Received SIGTERM scheduling shutdown...
89516:M 03 May 2025 23:04:47.370 * User requested shutdown...
89516:M 03 May 2025 23:04:47.370 * 1 of 1 replicas are in sync when shutting down.
89516:M 03 May 2025 23:04:47.370 * Removing the pid file.
89516:M 03 May 2025 23:04:47.370 * Saving the cluster configuration file before exiting.
89516:M 03 May 2025 23:04:47.377 * Removing the unix socket file.
89516:M 03 May 2025 23:04:47.377 # Valkey is now ready to exit, bye bye...
