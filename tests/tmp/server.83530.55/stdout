### Starting server for test 
93701:M 03 May 2025 23:04:55.784 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
93701:M 03 May 2025 23:04:55.784 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
93701:M 03 May 2025 23:04:55.784 * Valkey version=255.255.255, bits=64, commit=06ac4d81, modified=0, pid=93701, just started
93701:M 03 May 2025 23:04:55.784 * Configuration loaded
93701:M 03 May 2025 23:04:55.785 * Increased maximum number of open files to 10032 (it was originally set to 256).
93701:M 03 May 2025 23:04:55.785 * monotonic clock: POSIX clock_gettime
93701:M 03 May 2025 23:04:55.785 # Failed to write PID file: Permission denied
                .+^+.                                                
            .+#########+.                                            
        .+########+########+.           Valkey 255.255.255 (06ac4d81/0) 64 bit
    .+########+'     '+########+.                                    
 .########+'     .+.     '+########.    Running in cluster mode
 |####+'     .+#######+.     '+####|    Port: 23638
 |###|   .+###############+.   |###|    PID: 93701                     
 |###|   |#####*'' ''*#####|   |###|                                 
 |###|   |####'  .-.  '####|   |###|                                 
 |###|   |###(  (@@@)  )###|   |###|          https://valkey.io      
 |###|   |####.  '-'  .####|   |###|                                 
 |###|   |#####*.   .*#####|   |###|                                 
 |###|   '+#####|   |#####+'   |###|                                 
 |####+.     +##|   |#+'     .+####|                                 
 '#######+   |##|        .+########'                                 
    '+###|   |##|    .+########+'                                    
        '|   |####+########+'                                        
             +#########+'                                            
                '+v+'                                                

93701:M 03 May 2025 23:04:55.785 # WARNING: The TCP backlog setting of 511 cannot be enforced because kern.ipc.somaxconn is set to the lower value of 128.
93701:M 03 May 2025 23:04:55.785 * No cluster configuration found, I'm 9a21967532f5555297f32e59a6d14132c2074d4c
93701:M 03 May 2025 23:04:55.791 * Server initialized
93701:M 03 May 2025 23:04:55.791 * Ready to accept connections tcp
93701:M 03 May 2025 23:04:55.791 * Ready to accept connections unix
93701:M 03 May 2025 23:04:55.919 - Accepted 127.0.0.1:52315
93701:M 03 May 2025 23:04:55.922 - Client closed connection id=2 addr=127.0.0.1:52315 laddr=127.0.0.1:23638 fd=14 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=ping user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=7 tot-net-out=7 tot-cmds=1
93701:M 03 May 2025 23:04:55.934 - Accepted 127.0.0.1:52317
93701:M 03 May 2025 23:04:56.363 - Accepting cluster node connection from 127.0.0.1:52443
93701:M 03 May 2025 23:04:56.363 * IP address for this node updated to 127.0.0.1
93701:M 03 May 2025 23:04:56.381 # Missing implement of connection type tls
93701:M 03 May 2025 23:04:56.469 - Accepting cluster node connection from 127.0.0.1:52482
93701:M 03 May 2025 23:04:56.514 * Successfully completed handshake with 2a61950352228d652e0cd28d607003203413edc3 ()
93701:M 03 May 2025 23:04:56.538 * Successfully completed handshake with 0edc1598c6f19b54b438275a7178c8e2fb86866e ()
93701:M 03 May 2025 23:04:56.568 - Accepting cluster node connection from 127.0.0.1:52503
93701:M 03 May 2025 23:04:56.571 - Accepting cluster node connection from 127.0.0.1:52507
93701:M 03 May 2025 23:04:56.596 - Accepting cluster node connection from 127.0.0.1:52513
93701:M 03 May 2025 23:04:56.598 - Accepting cluster node connection from 127.0.0.1:52517
93701:M 03 May 2025 23:04:56.601 - Accepting cluster node connection from 127.0.0.1:52523
93701:M 03 May 2025 23:04:56.603 - Accepting cluster node connection from 127.0.0.1:52532
93701:M 03 May 2025 23:04:56.605 * configEpoch collision with node d74093fa5cbee191e5f4875844632e4b1178a823 (). configEpoch set to 4
93701:M 03 May 2025 23:04:56.650 - Accepting cluster node connection from 127.0.0.1:52551
93701:M 03 May 2025 23:04:57.220 * Node 5c935c3f58573c3c0a91c32b85a9758afa06799e () is no longer primary of shard 1d78e2e0763c8560fbddbec241a38e7f3805fcca; removed all 0 slot(s) it used to own
93701:M 03 May 2025 23:04:57.227 * Node 5c935c3f58573c3c0a91c32b85a9758afa06799e () is now part of shard ebb0ba4bcc3d89a575a739ac458cba1b3bad2be8
93701:M 03 May 2025 23:04:57.230 * Node 5c935c3f58573c3c0a91c32b85a9758afa06799e () is now a replica of node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () in shard ebb0ba4bcc3d89a575a739ac458cba1b3bad2be8
93701:M 03 May 2025 23:04:57.276 * Node 0edc1598c6f19b54b438275a7178c8e2fb86866e () is no longer primary of shard 4fc121ae00c8fcb15da30f003ea199f2f8cfe457; removed all 0 slot(s) it used to own
93701:M 03 May 2025 23:04:57.277 * Node 0edc1598c6f19b54b438275a7178c8e2fb86866e () is now part of shard 7ca01ed584c7f696f5412b60ba3b31d3fccb3643
93701:M 03 May 2025 23:04:57.284 * Node 0edc1598c6f19b54b438275a7178c8e2fb86866e () is now a replica of node cca93a04ed33746869c86c50fb722d75e6455a3c () in shard 7ca01ed584c7f696f5412b60ba3b31d3fccb3643
93701:M 03 May 2025 23:04:57.308 - Accepted 127.0.0.1:52698
93701:M 03 May 2025 23:04:57.311 * Node d74093fa5cbee191e5f4875844632e4b1178a823 () is no longer primary of shard a2c0be6204a680811ccd3d5db82f6cdf886409a3; removed all 0 slot(s) it used to own
93701:M 03 May 2025 23:04:57.313 * Node d74093fa5cbee191e5f4875844632e4b1178a823 () is now part of shard 4aa4b960efe84440273421442c9b7de1b3bf0707
93701:M 03 May 2025 23:04:57.313 * Node d74093fa5cbee191e5f4875844632e4b1178a823 () is now a replica of node 9a21967532f5555297f32e59a6d14132c2074d4c () in shard 4aa4b960efe84440273421442c9b7de1b3bf0707
93701:M 03 May 2025 23:04:57.336 * Replica 127.0.0.1:23633 asks for synchronization
93701:M 03 May 2025 23:04:57.340 * Full resync requested by replica 127.0.0.1:23633
93701:M 03 May 2025 23:04:57.341 * Replication backlog created, my new replication IDs are '750f5d67609f14c5731bbca0a94d3d7870a9a0ec' and '0000000000000000000000000000000000000000'
93701:M 03 May 2025 23:04:57.341 * Starting BGSAVE for SYNC with target: replicas sockets using: normal sync
93701:M 03 May 2025 23:04:57.342 * Background RDB transfer started by pid 93866 to pipe through parent process
93866:C 03 May 2025 23:04:57.342 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
93701:M 03 May 2025 23:04:57.346 * Node 5c328f9d2f54be47ee2e8999022778ff086b3624 () is no longer primary of shard 79a63df7d6cad403d83b5acc455de387c1311a74; removed all 0 slot(s) it used to own
93701:M 03 May 2025 23:04:57.349 * Node 5c328f9d2f54be47ee2e8999022778ff086b3624 () is now part of shard 06916f579a38286ea2028a011368696032f6c8ac
93701:M 03 May 2025 23:04:57.356 * Node 5c328f9d2f54be47ee2e8999022778ff086b3624 () is now a replica of node 2a61950352228d652e0cd28d607003203413edc3 () in shard 06916f579a38286ea2028a011368696032f6c8ac
93701:M 03 May 2025 23:04:57.374 * Diskless rdb transfer, done reading from pipe, 1 replicas still up.
93701:M 03 May 2025 23:04:57.375 * Node db91efb42d98480add759e79b4ee28dd04a3a2e0 () is no longer primary of shard 809fefde03e09cb34c1e2b85c6e639e885dc16db; removed all 0 slot(s) it used to own
93701:M 03 May 2025 23:04:57.380 * Node db91efb42d98480add759e79b4ee28dd04a3a2e0 () is now part of shard 54d1839130debb218475572bcaa4e761f3b9b2e4
93701:M 03 May 2025 23:04:57.382 * Node db91efb42d98480add759e79b4ee28dd04a3a2e0 () is now a replica of node d56e5afcc74e6566efeca03c7251faf1ab21a425 () in shard 54d1839130debb218475572bcaa4e761f3b9b2e4
93701:M 03 May 2025 23:04:57.403 * Background RDB transfer terminated with success
93701:M 03 May 2025 23:04:57.411 * Streamed RDB transfer with replica 127.0.0.1:23633 succeeded (socket). Waiting for REPLCONF ACK from replica to enable streaming
93701:M 03 May 2025 23:04:57.415 * Synchronization with replica 127.0.0.1:23633 succeeded
93701:M 03 May 2025 23:04:57.419 # DEBUG LOG: ========== I am primary 2 ==========
93701:M 03 May 2025 23:04:57.861 * Cluster state changed: ok
### Starting test Cluster is up in tests/unit/cluster/update-msg.tcl
### Starting test Cluster is writable in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:06.849 - Accepted 127.0.0.1:56064
93701:M 03 May 2025 23:05:06.895 - Client closed connection id=8 addr=127.0.0.1:56064 laddr=127.0.0.1:23638 fd=34 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=get user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=1914 tot-net-out=838 tot-cmds=48
### Starting test Instance #5 is a slave in tests/unit/cluster/update-msg.tcl
### Starting test Instance #5 synced with the master in tests/unit/cluster/update-msg.tcl
### Starting test Killing one master node in tests/unit/cluster/update-msg.tcl
### Starting test Wait for failover in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:10.177 * Node 2a61950352228d652e0cd28d607003203413edc3 () reported node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () as not reachable.
93701:M 03 May 2025 23:05:10.182 * Node d56e5afcc74e6566efeca03c7251faf1ab21a425 () reported node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () as not reachable.
93701:M 03 May 2025 23:05:10.185 * Marking node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () as failing (quorum reached).
93701:M 03 May 2025 23:05:10.186 # Cluster state changed: fail
93701:M 03 May 2025 23:05:10.189 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
93701:M 03 May 2025 23:05:10.529 * Node cca93a04ed33746869c86c50fb722d75e6455a3c () reported node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () as not reachable.
93701:M 03 May 2025 23:05:10.853 * Failover auth granted to 5c935c3f58573c3c0a91c32b85a9758afa06799e () for epoch 10
93701:M 03 May 2025 23:05:10.883 * Cluster state changed: ok
### Starting test Cluster should eventually be up again in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:10.980 * Node 5c935c3f58573c3c0a91c32b85a9758afa06799e () reported node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () as not reachable.
93701:M 03 May 2025 23:05:11.080 - DB 0: 24 keys (0 volatile) in 168 slots HT.
### Starting test Cluster is writable in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:11.108 - Accepted 127.0.0.1:60017
93701:M 03 May 2025 23:05:11.153 - Client closed connection id=9 addr=127.0.0.1:60017 laddr=127.0.0.1:23638 fd=34 name= age=0 idle=0 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=33792 events=r cmd=get user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=1914 tot-net-out=838 tot-cmds=48
### Starting test Instance #5 is now a master in tests/unit/cluster/update-msg.tcl
### Starting test Killing the new master #5 in tests/unit/cluster/update-msg.tcl
### Starting test Cluster should be down now in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:14.382 * Node cca93a04ed33746869c86c50fb722d75e6455a3c () reported node 5c935c3f58573c3c0a91c32b85a9758afa06799e () as not reachable.
93701:M 03 May 2025 23:05:14.419 * FAIL message received from cca93a04ed33746869c86c50fb722d75e6455a3c () about 5c935c3f58573c3c0a91c32b85a9758afa06799e ()
93701:M 03 May 2025 23:05:14.425 # Cluster state changed: fail
93701:M 03 May 2025 23:05:14.425 # Cluster is currently down: At least one hash slot is not served by any available node. Please check the 'cluster-require-full-coverage' configuration.
93701:M 03 May 2025 23:05:14.430 * Node 2a61950352228d652e0cd28d607003203413edc3 () reported node 5c935c3f58573c3c0a91c32b85a9758afa06799e () as not reachable.
93701:M 03 May 2025 23:05:14.430 * Node d56e5afcc74e6566efeca03c7251faf1ab21a425 () reported node 5c935c3f58573c3c0a91c32b85a9758afa06799e () as not reachable.
### Starting test Restarting the old master node in tests/unit/cluster/update-msg.tcl
### Starting test Instance #0 gets converted into a slave in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:14.698 - Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 has old slots configuration, sending an UPDATE message about 5c935c3f58573c3c0a91c32b85a9758afa06799e
93701:M 03 May 2025 23:05:14.706 * Clear FAIL state for node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 (): primary without slots is reachable again.
93701:M 03 May 2025 23:05:14.706 * A failover occurred in shard ebb0ba4bcc3d89a575a739ac458cba1b3bad2be8; node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () failed over to node 5c935c3f58573c3c0a91c32b85a9758afa06799e () with a config epoch of 10
93701:M 03 May 2025 23:05:14.706 * Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () is now a replica of node 5c935c3f58573c3c0a91c32b85a9758afa06799e () in shard ebb0ba4bcc3d89a575a739ac458cba1b3bad2be8
### Starting test Restarting the new master node in tests/unit/cluster/update-msg.tcl
### Starting test Cluster is up again in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:14.769 * Node d56e5afcc74e6566efeca03c7251faf1ab21a425 () reported node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () is back online.
93701:M 03 May 2025 23:05:14.839 * Node 2a61950352228d652e0cd28d607003203413edc3 () reported node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () is back online.
93701:M 03 May 2025 23:05:14.936 * Node 5c935c3f58573c3c0a91c32b85a9758afa06799e () reported node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () is back online.
93701:M 03 May 2025 23:05:14.994 * Node cca93a04ed33746869c86c50fb722d75e6455a3c () reported node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () is back online.
93701:M 03 May 2025 23:05:15.745 * Failover auth granted to 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () for epoch 11
93701:M 03 May 2025 23:05:15.775 * Cluster state changed: ok
93701:M 03 May 2025 23:05:15.825 * A failover occurred in shard ebb0ba4bcc3d89a575a739ac458cba1b3bad2be8; node 5c935c3f58573c3c0a91c32b85a9758afa06799e () failed over to node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () with a config epoch of 11
93701:M 03 May 2025 23:05:15.825 * Node 5c935c3f58573c3c0a91c32b85a9758afa06799e () is now a replica of node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 () in shard ebb0ba4bcc3d89a575a739ac458cba1b3bad2be8
93701:M 03 May 2025 23:05:15.945 * Clear FAIL state for node 5c935c3f58573c3c0a91c32b85a9758afa06799e (): replica is reachable again.
93701:M 03 May 2025 23:05:16.021 * Node d56e5afcc74e6566efeca03c7251faf1ab21a425 () reported node 5c935c3f58573c3c0a91c32b85a9758afa06799e () is back online.
### Starting test Check for memory leaks (pid 93781) in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:16.145 - DB 0: 24 keys (0 volatile) in 168 slots HT.
93701:M 03 May 2025 23:05:16.147 * Node 2a61950352228d652e0cd28d607003203413edc3 () reported node 5c935c3f58573c3c0a91c32b85a9758afa06799e () is back online.
93701:M 03 May 2025 23:05:16.149 * Node cca93a04ed33746869c86c50fb722d75e6455a3c () reported node 5c935c3f58573c3c0a91c32b85a9758afa06799e () is back online.
93701:M 03 May 2025 23:05:18.065 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:18.166 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
### Starting test Check for memory leaks (pid 93748) in tests/unit/cluster/update-msg.tcl
93701:M 03 May 2025 23:05:18.266 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:18.367 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:18.468 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:18.571 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:18.672 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:18.774 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:18.875 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:18.976 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:19.078 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:19.179 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:19.280 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:19.381 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:19.481 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:19.582 - Connection with Node cca93a04ed33746869c86c50fb722d75e6455a3c at 127.0.0.1:33639 failed: Connection refused
93701:M 03 May 2025 23:05:19.586 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:19.609 - Client closed connection id=3 addr=127.0.0.1:52317 laddr=127.0.0.1:23638 fd=14 name= age=24 idle=4 flags=N capa= db=0 sub=0 psub=0 ssub=0 multi=-1 watch=0 qbuf=0 qbuf-free=16890 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=18432 events=r cmd=cluster|info user=default redir=-1 resp=2 lib-name= lib-ver= tot-net-in=457 tot-net-out=9893 tot-cmds=14
93701:M 03 May 2025 23:05:19.683 - Connection with Node cca93a04ed33746869c86c50fb722d75e6455a3c at 127.0.0.1:33639 failed: Connection refused
93701:M 03 May 2025 23:05:19.683 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:19.784 - Connection with Node cca93a04ed33746869c86c50fb722d75e6455a3c at 127.0.0.1:33639 failed: Connection refused
93701:M 03 May 2025 23:05:19.790 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:M 03 May 2025 23:05:20.651 - Connection with Node cca93a04ed33746869c86c50fb722d75e6455a3c at 127.0.0.1:33639 failed: Connection refused
93701:M 03 May 2025 23:05:20.658 - Connection with Node 0355953e79c569a4e5e657cf95ccaac850f3a1f4 at 127.0.0.1:33640 failed: Connection refused
93701:signal-handler (1746281120) Received SIGTERM scheduling shutdown...
93701:M 03 May 2025 23:05:20.752 * User requested shutdown...
93701:M 03 May 2025 23:05:20.755 * 1 of 1 replicas are in sync when shutting down.
93701:M 03 May 2025 23:05:20.760 * Removing the pid file.
93701:M 03 May 2025 23:05:20.770 * Saving the cluster configuration file before exiting.
93701:M 03 May 2025 23:05:20.855 * Removing the unix socket file.
93701:M 03 May 2025 23:05:20.867 # Valkey is now ready to exit, bye bye...
